<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lucas Okwudishu">
<meta name="dcterms.date" content="2023-12-02">

<title>Lucas Okwudishu - Machine Learning for Email Lead Scoring</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Lucas Okwudishu</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html" rel="" target="">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/lucasokwudishu" rel="" target="">
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/LucasO21/" rel="" target="">
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://medium.com/@clfo2014" rel="" target="">
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Machine Learning for Email Lead Scoring</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
            <p class="subtitle lead">A Case Study of Predictive Analytics in Marketing</p>
                                <div class="quarto-categories">
                <div class="quarto-category">predictive analytics</div>
                <div class="quarto-category">marketing analytics</div>
                <div class="quarto-category">machine learning</div>
                <div class="quarto-category">roi analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Lucas Okwudishu </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 2, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#problem-statement-objective" id="toc-problem-statement-objective" class="nav-link" data-scroll-target="#problem-statement-objective"><span class="header-section-number">2</span> Problem Statement &amp; Objective</a>
  <ul class="collapse">
  <li><a href="#objective" id="toc-objective" class="nav-link" data-scroll-target="#objective"><span class="header-section-number">2.1</span> Objective</a></li>
  <li><a href="#what-is-the-business-science-problem-framework" id="toc-what-is-the-business-science-problem-framework" class="nav-link" data-scroll-target="#what-is-the-business-science-problem-framework"><span class="header-section-number">2.2</span> What Is the Business Science Problem Framework</a></li>
  </ul></li>
  <li><a href="#business-understanding" id="toc-business-understanding" class="nav-link" data-scroll-target="#business-understanding"><span class="header-section-number">3</span> Business Understanding</a>
  <ul class="collapse">
  <li><a href="#cost-assessment" id="toc-cost-assessment" class="nav-link" data-scroll-target="#cost-assessment"><span class="header-section-number">3.1</span> Cost Assessment</a></li>
  </ul></li>
  <li><a href="#data-understanding" id="toc-data-understanding" class="nav-link" data-scroll-target="#data-understanding"><span class="header-section-number">4</span> Data Understanding</a>
  <ul class="collapse">
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis"><span class="header-section-number">4.1</span> Exploratory Data Analysis</a>
  <ul class="collapse">
  <li><a href="#proportion-of-subscribers-with-previous-purchase" id="toc-proportion-of-subscribers-with-previous-purchase" class="nav-link" data-scroll-target="#proportion-of-subscribers-with-previous-purchase"><span class="header-section-number">4.1.1</span> Proportion of Subscribers with Previous Purchase</a></li>
  <li><a href="#member-rating-vs-made-purchase" id="toc-member-rating-vs-made-purchase" class="nav-link" data-scroll-target="#member-rating-vs-made-purchase"><span class="header-section-number">4.1.2</span> Member Rating vs Made Purchase</a></li>
  <li><a href="#country-code-vs-made-purchase" id="toc-country-code-vs-made-purchase" class="nav-link" data-scroll-target="#country-code-vs-made-purchase"><span class="header-section-number">4.1.3</span> Country Code vs Made Purchase</a></li>
  <li><a href="#tag-count-vs-made-purchase" id="toc-tag-count-vs-made-purchase" class="nav-link" data-scroll-target="#tag-count-vs-made-purchase"><span class="header-section-number">4.1.4</span> Tag Count vs Made Purchase</a></li>
  <li><a href="#correlation" id="toc-correlation" class="nav-link" data-scroll-target="#correlation"><span class="header-section-number">4.1.5</span> Correlation</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#formulating-kpis" id="toc-formulating-kpis" class="nav-link" data-scroll-target="#formulating-kpis"><span class="header-section-number">5</span> Formulating KPIs</a></li>
  <li><a href="#feature-engineering" id="toc-feature-engineering" class="nav-link" data-scroll-target="#feature-engineering"><span class="header-section-number">6</span> Feature Engineering</a></li>
  <li><a href="#machine-learning" id="toc-machine-learning" class="nav-link" data-scroll-target="#machine-learning"><span class="header-section-number">7</span> Machine Learning</a>
  <ul class="collapse">
  <li><a href="#testing-multiple-models" id="toc-testing-multiple-models" class="nav-link" data-scroll-target="#testing-multiple-models"><span class="header-section-number">7.1</span> Testing Multiple Models</a></li>
  <li><a href="#model-metrics" id="toc-model-metrics" class="nav-link" data-scroll-target="#model-metrics"><span class="header-section-number">7.2</span> Model Metrics</a>
  <ul class="collapse">
  <li><a href="#auc-roc-plot" id="toc-auc-roc-plot" class="nav-link" data-scroll-target="#auc-roc-plot"><span class="header-section-number">7.2.1</span> AUC-ROC Plot</a></li>
  <li><a href="#confusion-matrix" id="toc-confusion-matrix" class="nav-link" data-scroll-target="#confusion-matrix"><span class="header-section-number">7.2.2</span> Confusion Matrix</a></li>
  <li><a href="#feature-importance" id="toc-feature-importance" class="nav-link" data-scroll-target="#feature-importance"><span class="header-section-number">7.2.3</span> Feature Importance</a></li>
  <li><a href="#shap-values" id="toc-shap-values" class="nav-link" data-scroll-target="#shap-values"><span class="header-section-number">7.2.4</span> Shap Values</a></li>
  <li><a href="#shap-values-specific-observations" id="toc-shap-values-specific-observations" class="nav-link" data-scroll-target="#shap-values-specific-observations"><span class="header-section-number">7.2.5</span> Shap Values (Specific Observations)</a></li>
  </ul></li>
  <li><a href="#blending-models-ensembling-for-enhanced-performance" id="toc-blending-models-ensembling-for-enhanced-performance" class="nav-link" data-scroll-target="#blending-models-ensembling-for-enhanced-performance"><span class="header-section-number">7.3</span> Blending Models (Ensembling) for Enhanced Performance</a></li>
  </ul></li>
  <li><a href="#experiment-trackinglogging-mlflow" id="toc-experiment-trackinglogging-mlflow" class="nav-link" data-scroll-target="#experiment-trackinglogging-mlflow"><span class="header-section-number">8</span> Experiment Tracking/Logging (MLflow)</a>
  <ul class="collapse">
  <li><a href="#what-is-mlflow" id="toc-what-is-mlflow" class="nav-link" data-scroll-target="#what-is-mlflow"><span class="header-section-number">8.1</span> What is MLflow?</a></li>
  <li><a href="#integrating-mlflow-with-pycaret" id="toc-integrating-mlflow-with-pycaret" class="nav-link" data-scroll-target="#integrating-mlflow-with-pycaret"><span class="header-section-number">8.2</span> Integrating MLflow with PyCaret</a></li>
  </ul></li>
  <li><a href="#return-on-investment-roi" id="toc-return-on-investment-roi" class="nav-link" data-scroll-target="#return-on-investment-roi"><span class="header-section-number">9</span> Return on Investment (ROI)</a>
  <ul class="collapse">
  <li><a href="#initial-threshold-cost-savings" id="toc-initial-threshold-cost-savings" class="nav-link" data-scroll-target="#initial-threshold-cost-savings"><span class="header-section-number">9.1</span> Initial Threshold &amp; Cost Savings</a>
  <ul class="collapse">
  <li><a href="#expected-value-cost-vs-savings" id="toc-expected-value-cost-vs-savings" class="nav-link" data-scroll-target="#expected-value-cost-vs-savings"><span class="header-section-number">9.1.1</span> Expected Value (Cost vs Savings)</a></li>
  </ul></li>
  <li><a href="#threshold-optimization-profit-maximization" id="toc-threshold-optimization-profit-maximization" class="nav-link" data-scroll-target="#threshold-optimization-profit-maximization"><span class="header-section-number">9.2</span> Threshold Optimization &amp; Profit Maximization</a></li>
  </ul></li>
  <li><a href="#backend-deployment-fastapi" id="toc-backend-deployment-fastapi" class="nav-link" data-scroll-target="#backend-deployment-fastapi"><span class="header-section-number">10</span> Backend Deployment (FastAPI)</a>
  <ul class="collapse">
  <li><a href="#api" id="toc-api" class="nav-link" data-scroll-target="#api"><span class="header-section-number">10.1</span> API</a></li>
  </ul></li>
  <li><a href="#frontend-deployment-streamlit" id="toc-frontend-deployment-streamlit" class="nav-link" data-scroll-target="#frontend-deployment-streamlit"><span class="header-section-number">11</span> Frontend Deployment (Streamlit)</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">12</span> Conclusion</a></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps"><span class="header-section-number">13</span> Next Steps</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Businesses face challenges in identifying and prioritizing potential customers and/or identifying the future purchase potential of current customers based on their email interactions, leading to sub-optimal allocation of resources and missed opportunities.</p>
<p>Email lead scoring plays a crucial role in determining the quality and conversion potential of leads generated through email marketing campaigns. Email lead scoring is a method used by marketers and sales teams to evaluate and prioritize <a href="https://www.wrike.com/marketing-guide/faq/what-is-a-lead-in-marketing/" target="_blank">leads</a> based on their potential to become customers. It involves assigning scores or ratings to individual leads based on their behavior, interactions, and other characteristics. However, the traditional manual lead scoring methods are time-consuming, subjective, and often produce inconsistent results. Additionally, these methods do not fully leverage the available data, such as email content, sender information, and historical customer interactions.</p>
<p>Machine learning based solutions can effectively evaluate the probability of leads converting into customers based on various data points extracted from email interactions. This solution should take into account factors like email open rates, click-through rates, response times, engagement patterns, and historical customer data to provide a comprehensive lead score.</p>
<p>By leveraging machine learning algorithms, such as classification models businesses can create a reliable and automated system that can accurately score and rank email leads according to their conversion potential. The solution will empower email marketers to prioritize their efforts and resources more effectively, enabling them to focus on the most promising leads and improve overall sales and marketing efficiency.</p>
<p><strong>Note:</strong> This project was completed as part of the <a href="https://university.business-science.io/p/ds4b-201-p-machine-learning-and-apis-with-python?el=website">Python for Machine Learning and APIs</a> course by <a href="https://www.business-science.io/" target="_blank">Business Science University</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/title/course_workflow.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>The project demonstrates and end-to-end email lead scoring solution for a business, from initial analysis, to modeling, to deployment. Skills demonstrated in this project include -</p>
<ul>
<li>Project management. ✅</li>
<li>Business understanding. ✅</li>
<li>Business return on investment and sensitivity analysis. ✅</li>
<li>Exploratory data analysis. ✅</li>
<li>Machine learning (using tools like python, pycaret, mlflow). ✅</li>
<li>Model deployment (using tools like fastapi and streamlit). ✅</li>
</ul>
<p>Above all, the project demonstrates how to solve key business problems in the real world.</p>
<hr>
</section>
<section id="problem-statement-objective" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Problem Statement &amp; Objective</h1>
<!--
::: {.callout-note title="BSPF Phase"}
This section falls under the **View Business as a Machine** Phase of the [BSPF](https://www.business-science.io/business/2018/06/19/business-science-problem-framework.html).
:::
-->
<p>As mentioned earlier, this analysis provides a lead scoring solution for an online educational company. The company offers training courses (their main product) in data science and has a large email list of <strong>100,000</strong> subscribers (or leads), with a monthly growth rate of <strong>6,000</strong> new subscribers. The marketing team also sends out <strong>5</strong> emails per month and the business’s sales cycle generates approximately <strong>$250,000</strong> in revenue per month.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Subscribers</strong> and <strong>Leads</strong> will be used interchangeably throughout this project. Note they both refer to the same thing.</p>
</div>
</div>
<p>However, the email list also experiences a significant number of unsubscribes, about <strong>500</strong> per email, resulting in a total of <strong>2,500</strong> unsubscribes per month.</p>
<p>This high unsubscribe rate indicates potential inefficiencies in the email marketing strategy. In addition, high unsubscribe rates can result in reduced revenue, especially if the business relies heavily on email marketing as a primary channel for generating leads and driving conversions. To sustain and increase revenue, it is crucial to optimize the email marketing approach and maximize customer conversion rates. The business also believes that nurturing lost customers could potential convert about <strong>5%</strong> of them back into active customers.</p>
<section id="objective" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="objective"><span class="header-section-number">2.1</span> Objective</h2>
<p>Given these key insights, the problem at hand is to develop an effective email list scoring and segmentation strategy. The goal is to identify and prioritize the most valuable leads (in terms of probability of making a purchase) to target for sales emails, while also identifying leads with a low probability of purchase to nurture and increase their likelihood to purchase.</p>
<p>In summary, the primary objective is to leverage email list scoring and segmentation techniques to improve customer engagement, reduce unsubscribes, increase customer conversion rates, and ultimately maximize revenue and customer lifetime value.</p>
<p>Now that we have a general understanding of the problem statement and the objective, the next sections will focus on a business solution process using the Business Science Problem Framework.</p>
</section>
<section id="what-is-the-business-science-problem-framework" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="what-is-the-business-science-problem-framework"><span class="header-section-number">2.2</span> What Is the Business Science Problem Framework</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/title/bspf_framework.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>The <a href="https://www.business-science.io/bspf.html" target="_blank">Business Science Problem Framework</a> (BSPF) is a structured approach used for solving complex business problems, especially those involving data science and analytics. It’s designed to streamline the process of transforming a business problem into an analytical problem, and then into a data science solution.</p>
<hr>
</section>
</section>
<section id="business-understanding" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Business Understanding</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section falls under the <strong>Understanding drivers</strong> Phase of the <a href="https://www.business-science.io/business/2018/06/19/business-science-problem-framework.html" target="_blank">BSPF</a>.</p>
</div>
</div>
<p>Addressing business challenges like these demands significant resources, including both time and money. Therefore a key question to ask is <em>“is this problem worth solving?”</em></p>
<p>In this phase, the key is to highlight why this problem should be a business priority. One way to achieve this is by calculating the cost of the business problem by understanding how high unsubscribe rates lead to lower revenue. Our goals in this phase include -</p>
<ul>
<li><p>Cost Assessment - Assign a cost to high unsubscribe rates, thus giving the business a point estimate of annual costs of unsubscribe rates. This step does NOT account for the growth rate of email lists.</p></li>
<li><p>Improve Cost Analysis - Improve on cost assessment by accounting for email list growth uncertainty.</p></li>
<li><p>Business Cost Simulation - This step is necessary to model costs under varying key inputs, especially when accounting for uncertainty.</p></li>
</ul>
<section id="cost-assessment" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="cost-assessment"><span class="header-section-number">3.1</span> Cost Assessment</h2>
<p>Given the values highlighted in the <a href="#problem-statement--objective">problem statement</a> section, we can estimate the monthly lost revenue (we’ll refer to this as cost going forward) due to unsubscribes to be around <strong>$250K</strong> per month (or <strong>$3M</strong> annually), not factoring in email list growth rate. This hidden cost is shown in the table below -</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/cost/cost_scenario_table.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>After factoring in a <strong>3.5%</strong> monthly email list growth rate (last column), we can expect the lost revenue due to unsubscribes to rise to around <strong>$364K</strong> per month (or <strong>$4.3M</strong> per year), an increase of <strong>46%</strong> in lost revenue.</p>
<p>We can see the high cost of this problem which is the lost revenue to the business. However, the values shown in the table above do not factor in uncertainty. We can thus improve on our cost assessment by factoring in uncertainty in some of the drivers. Let assume some monthly variability in email list growth rate and conversion rate. The heatmap below shows a cost simulation with variability. The y-axis represents various levels of customer conversion rate while the x-axis represents various levels of email list growth rate;</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/cost/cost_simulation.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>We can see that regardless of how the drivers vary, we can still expect to see annual costs ranging from <strong>$2.61M</strong> to <strong>$4.38M</strong>. Thus this is definitely a problem worth solving.</p>
<p>At this point, a key question is <em>“can we reduce the unsubscribe rate?”</em>. Recall that the business is losing <strong>500</strong> subscribers for every email sent out. What if we can reduce that number by <strong>50%</strong> (or <strong>250</strong>), while maintaining <strong>90%</strong> of revenue. What impact will that have on the business?</p>
<p>The only problem is that we still do not know a lot about what causes a subscriber to make a purchase. If we do, we can focus on targeting the ones that are more likely to purchase with sales emails and nurture the ones who are unlikely to covert at the moment. This will help with our goal of reducing the unsubscribe rate while maintaining <strong>90%</strong> of revenue.</p>
<hr>
</section>
</section>
<section id="data-understanding" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Data Understanding</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section falls under the <strong>Understand The Drivers</strong> Phase of the <a href="https://www.business-science.io/business/2018/06/19/business-science-problem-framework.html" target="_blank">BSPF</a>.</p>
</div>
</div>
<p>This phase requires understanding the data available at our disposal to tackle this problem. The visual below gives an overview of the company’s crm database including table and field descriptions. Connecting arrows show how each table can be linked to other tables based on common fields.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/other/crm_database.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Note:</strong> We will not be using the <code>website</code> table in this project.</p>
</div>
</div>
<section id="exploratory-data-analysis" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="exploratory-data-analysis"><span class="header-section-number">4.1</span> Exploratory Data Analysis</h2>
<p>After some initial data manipulation to get the data in the right format we need for analysis, including adding a target feature which is a binary flag of if a lead has made a previous purchase or not (we’ll call this target feature <code>made_purchase</code>), we can then begin to do some initial exploratory analysis to get a sense what features in our dataset could be predictive of leads making a purchase.</p>
<p>First, lets analyze our target feature <code>made_purchase</code>.</p>
<section id="proportion-of-subscribers-with-previous-purchase" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="proportion-of-subscribers-with-previous-purchase"><span class="header-section-number">4.1.1</span> Proportion of Subscribers with Previous Purchase</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/eda/made_purchase_prop.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p><strong>Observation:</strong> Only <strong>5%</strong> of leads have made a previous purchase, meaning we are dealing with a highly <a href="https://developers.google.com/machine-learning/data-prep/construct/sampling-splitting/imbalanced-data" target="_blank">imbalanced dataset</a>.</p>
</section>
<section id="member-rating-vs-made-purchase" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="member-rating-vs-made-purchase"><span class="header-section-number">4.1.2</span> Member Rating vs Made Purchase</h3>
<p>The plot below shows the different values of <code>member_rating</code> vs the proportion of <code>made_purchase</code> for users with each value of <code>member_rating</code> -</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/eda/member_rating_vs_made_purchase.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p><strong>Observation:</strong> <code>member_rating</code> appears to be quite predictive of <code>made_purchase</code>. We can see that the likelihood of a user making a purchase increases 3x when the <code>member_rating</code> goes from 1 to 2. Additionally the likelihood of making a purchase increases 5x when the <code>member_rating</code> goes from 2 to 5.</p>
</section>
<section id="country-code-vs-made-purchase" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="country-code-vs-made-purchase"><span class="header-section-number">4.1.3</span> Country Code vs Made Purchase</h3>
<p>The plot below shows <code>country_code</code> along with the within group <code>made_purchase</code> proportion, for the top 10 countries in terms of count of users -</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/eda/country_code_vs_made_purchase.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p><strong>Observation:</strong> <code>country_code</code> also appears to be quite predictive of <code>made_purchase</code> as well.For example we can see that while the US has the most users (over 3,500), the proportion of US users who have made a purchase is ~10%. However a country like AU, which has less than 500 users has a higher proportion of users who have made a purchase (~12%).</p>
</section>
<section id="tag-count-vs-made-purchase" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="tag-count-vs-made-purchase"><span class="header-section-number">4.1.4</span> Tag Count vs Made Purchase</h3>
<p>The plot below shows <code>tag_count</code> along with the within group <code>made_purchase</code> proportion, for a selected number of <code>tag_count</code>. Recall that tags here refer to various events like webinars. Therefore <code>tag_count</code> refers to the number of such events a user has attended -</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/eda/tags_vs_made_purchase.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p><strong>Observation:</strong> We can see that if a subscriber has 40 or more tags (events), they are 100% likely to make a purchase. That likelihood drops as <code>tag_count</code> decreases. Note that a lead with 0 tags only have a 2% likelihood of making a purchase. For those with 0 tags (meaning they have not attended any events yet) we may not want to send them emails just yet. We may want to try and nurture them to attend more events before trying to get them to make a purchase. Overall if the business can get leads to attend more events, it drastically increases their likelihood of making a purchase.</p>
</section>
<section id="correlation" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="correlation"><span class="header-section-number">4.1.5</span> Correlation</h3>
<p>The plot below is a correlation heatmap of numeric features only -</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/eda/corr_heatmap.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p><strong>Observation</strong>: These correlation values further validate some of the data we saw earlier. We can see that <code>tag_count</code> and <code>member_rating</code> do show a fairly high correlation with <code>made_purchase</code>.</p>
<hr>
</section>
</section>
</section>
<section id="formulating-kpis" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Formulating KPIs</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section falls under the <strong>Measure the Drivers/Uncover Problems and Opportunities</strong> phase of the BSPF</p>
</div>
</div>
<p>Now that we have a bit more understanding of some of the potential drivers of <code>made_purchase</code>, we may want to develop some hypothesis about how to improve the likelihood of a lead making a purchase by applying some of the insights we just learned. For example;</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p><em>“Can we reduce the number of sales emails sent to subscribers by 30% and still maintain 99% of sales revenue?”</em></p>
</blockquote>
</blockquote>
<p>Can we segment our email list into hot and cold leads? Hot-Leads meaning those who are more likely to purchase (subscribers with high <code>member_rating</code> for example), and Cold-Leads meaning those less likely to purchase (subscribers with low <code>member_rating</code>). This way we could come up with a strategy to only send sales emails to hot leads, while nurturing cold leads to increase their likelihood of purchase.</p>
<p>One of such KPIs could be to increase the median <code>tag_count</code>. Looking at the table below, we can see that the median <code>tag_count</code> for those who have not made a purchase is 0 while for those who have made a purchase, the median <code>tag_count</code> is 2. Thus, we could establish a KPI for Cold-Leads to get their median <code>tag_count</code> to 2 or more (attend 2 or more webinars/events) and increase their likelihood of making a purchase.</p>
<table class="table">
<caption>Ensemble AUC of <strong>0.8020</strong> vs Individual Models</caption>
<thead>
<tr class="header">
<th>Category</th>
<th style="text-align: left;">Total Leads</th>
<th style="text-align: left;">Made Purchase</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cold-Leads</td>
<td style="text-align: left;">5,528</td>
<td style="text-align: left;">49</td>
</tr>
<tr class="even">
<td>Hot-Leads</td>
<td style="text-align: left;">14,691</td>
<td style="text-align: left;">913</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="feature-engineering" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Feature Engineering</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section falls under the <strong>Encode Algorithms</strong> phase of the BSPF</p>
</div>
</div>
<p>Now that we have a better understanding of our data and what features might be predictive of a subscriber making a purchase, the next phase in our workflow is creating preprocessing pipelines to get our data in the right form for machine learning algorithms. <strong>Feature Engineering</strong> is the process of selecting, manipulating and transforming raw data into features that can be used in supervised learning algorithms.</p>
<p>Understanding the business context and having domain expertise can greatly influence the choice and creation of features. Different businesses and domains may have unique characteristics, specific factors that impact the target variable, and relevant attributes that need to be considered during feature engineering.</p>
<p>For this analysis, the following addition features were created from existing data;</p>
<ul>
<li><p><code>optin_days</code> - Generated from <code>optin_time</code>. This is the number of days the subscriber has been on the company’s email list.</p></li>
<li><p><code>email_provider</code> - Generated from <code>user_email</code>. Multiple email providers (such as gmail, hotmail) etc are being used by subscribers, and could be helpful in predicting made_purchase.</p></li>
<li><p><code>activity_per_time</code> - Generated by dividing <code>tag_count</code> (count of events a subscriber has attended) by the newly created <code>optin_days</code>.</p></li>
<li><p>One-To-Many Features (<code>tags</code>) - These are binary features (0s or 1s) for each tag (event) to indicate if a user attend the event or not.</p></li>
<li><p>Reducing High Cardinality - Applied to <code>country_code</code>. Using a threshold of 6, this process lumps countries that have less than 6 subscribers in the dataset into an <code>other</code> category.</p></li>
</ul>
<p>To demonstrate the importance of feature engineering in this analysis, we’ll show an example of some of the new features created and their relationship with <code>made_purchase</code> (or target). The plot below shows the proportion of leads who made a purchase for 9 randomly selected tags (events). Looking at the first event (<code>tag_learning_lab_09</code>) we can see that if a lead attended that event, they have a 19% likelihood of making a purchase vs only 5% if they did not attend the event. For <code>tag_learning_lab_12</code>, the likelihood of making a purchase if they attended that event is 28% vs 5% if they did not. We can also see similar trends for the other tags.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/eda/attended_event_vs_made_purchase_prop.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>This indicates that these additional features could be indicative of <code>made_purchase</code>.</p>
<hr>
</section>
<section id="machine-learning" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Machine Learning</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section falls under the <strong>Encode Alogrithms</strong> phase of the BSPF</p>
</div>
</div>
<p>This phase of the analysis focuses on encoding algorithms for email lead scoring. As a reminder the goal is to predict and score email subscribers that are likely to make a purchase, based on features identified and engineered in previous sections. Therefore this is a binary classification problem. For modeling, we use the <a href="https://pycaret.org/" target="_blank">Pycaret</a> python package. Pycaret is an open-source, low code machine learning library in Python that automates machine learning workflows. Pycaret is not only a package for building machine learning models, instead it is an end-to-end machine learning and model management tool that makes it easy to experiment with multiple machine learning models, while logging all experiments.</p>
<section id="testing-multiple-models" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="testing-multiple-models"><span class="header-section-number">7.1</span> Testing Multiple Models</h2>
<p>Several models were initially tested, using <a href="https://developers.google.com/machine-learning/crash-course/classification/roc-and-auc" target="_blank">Area Under the Curve</a> (AUC) as the key metric. Higher AUC indicates a better-performing model in distinguishing positive and negative leads. The chart below shows the AUC along with other metrics from initial modeling. We can see the top 3 models in terms of AUC are Gradient Boosting Classifier (0.8044) CatBoost Classifier (0.8015) and Ada Boost Classifier (0.7965).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/best_models.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</section>
<section id="model-metrics" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="model-metrics"><span class="header-section-number">7.2</span> Model Metrics</h2>
<p>Here we can examine metrics for the Catboost model.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Model Metrics (Catboost)">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Model Metrics (Catboost)
</div>
</div>
<div class="callout-body-container callout-body">
<p>The choice of Catboost, a tree-based model, is driven by its inherent advantage in explainability, which is critical for understanding model decisions and behavior. It’s important to note that the final model selection will be determined in the Return on Investment (ROI) section of the course. However, it is worth mentioning that all the models under consideration exhibit very similar performance metrics. Consequently, regardless of the final choice, we can anticipate that the selected model will demonstrate metrics comparable to those of the Catboost model. This consistency across models ensures reliability in the anticipated performance, irrespective of the specific model chosen.</p>
</div>
</div>
<section id="auc-roc-plot" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="auc-roc-plot"><span class="header-section-number">7.2.1</span> AUC-ROC Plot</h3>
<p>An AUC-ROC (Area Under the Receiver Operating Characteristic Curve) plot is a graphical representation that summarizes the performance of a binary classification model. It showcases the model’s ability to distinguish between positive and negative instances by plotting the true positive rate against the false positive rate. The AUC value, ranging from 0 to 1, quantifies the model’s accuracy, with a higher value (higher curve towards 1) indicating better performance. The AUC-ROC plot enables data scientists and decision-makers to assess and compare models, aiding in the selection and optimization of classification algorithms.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/best_model_1/auc_best_model_1.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
</section>
<section id="confusion-matrix" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="confusion-matrix"><span class="header-section-number">7.2.2</span> Confusion Matrix</h3>
<p>The confusion matrix is a tabular representation that provides a comprehensive summary of the performance of a classification model. It organizes predictions made by the model into four categories: true positives (TP), true negatives (TN), false positives (FP), and false negatives (FN).</p>
<ul>
<li>True Positive (TP): The model correctly predicts the positive class.</li>
<li>True Negative (TN): The model correctly predicts the negative class.</li>
<li>False Positive (FP): The model incorrectly predicts the positive class when it should have been negative (Type I error).</li>
<li>False Negative (FN): The model incorrectly predicts the negative class when it should have been positive (Type II error).</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/best_model_1/cm_best_model_1.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>Let’s understand the confusion matrix above;</p>
<ul>
<li>24 predictions (bottom right) are true positives, these are the subscribers the model predicted will make a purchase and they did make a purchase. 27 (top right) are false positives. The model predicted them to make a purchase and they did not. This is where we might have wasted effort.</li>
<li>168 (bottom left) are false negatives. The model predicted they will not make a purchase but they did. These are missed opportunities. 3765 (top left) are true negatives. The model predicted they will not make a purchase and they did not. There is no impact for these.</li>
</ul>
</section>
<section id="feature-importance" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3" class="anchored" data-anchor-id="feature-importance"><span class="header-section-number">7.2.3</span> Feature Importance</h3>
<p>A feature importance plot is a graphical representation that helps us understand the relative importance of different features or variables in a predictive model. It provides insights into what factors or variables have the most significant impact on the outcome or target variable. The plot below show feature importance for the Catboost model;</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/best_model_1/vip_best_model_1.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>You can see that the model shows the most importance features to be <code>optin_days</code>, <code>member_rating</code> and <code>country_code_US</code>. Note that this order may vary for another model. Different machine learning models can have different ranking for feature importance due to their inherent characteristics and the Algorithms they employ to make predictions. Factors such as model architecture, algorithmic approach, feature interactions, model assumptions, all play a part in how a model ranks feature imporance.</p>
</section>
<section id="shap-values" class="level3" data-number="7.2.4">
<h3 data-number="7.2.4" class="anchored" data-anchor-id="shap-values"><span class="header-section-number">7.2.4</span> Shap Values</h3>
<p>A SHAP (SHapley Additive exPlanations) values plot is a visual representation that provides insights into the contribution of individual features to the predictions made by a machine learning model. It is based on Shapley values, a concept from cooperative game theory, which assigns a value to each feature by measuring its impact on the prediction compared to its absence or average value. The SHAP values plot displays the magnitude and direction of each feature’s impact on the model predictions, allowing for a comprehensive understanding of how different features influence the outcomes. It helps identify which features have the most significant positive or negative influence on predictions and provides a clear picture of how the model is making decisions based on different feature values. This plot enables users, including business leaders, to interpret and explain the model’s behavior and make informed decisions based on the feature contributions.</p>
<p>The plot below shows shap values for the Catboost model;</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/best_model_1/shap_summary.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>The higher the shap value is (x-axis), the higher the likelihood of positive. For example we can see the higher shap values for member_rating and tag_count, meaning that subscribers who have higher values for these 2 features are more likely to predicted as making a purchase.</p>
</section>
<section id="shap-values-specific-observations" class="level3" data-number="7.2.5">
<h3 data-number="7.2.5" class="anchored" data-anchor-id="shap-values-specific-observations"><span class="header-section-number">7.2.5</span> Shap Values (Specific Observations)</h3>
<p>Shap values can also be created for specific observations or individual leads in this case. Below is the plot of shap values for a customer with a predicted label of 0 and prediction score (probability) of 0.67.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/best_model_1/shap_instance_0.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
<p>The plot shows how the prediction of the model was influenced by each input feature, by displaying the contribution of each feature as a horizontal bar on the plot. The length of the bar represents the magnitude of each feature’s SHAP value, with longer bars indicating a larger impact on the prediction.</p>
<p>The color of the bars indicate the direction of the impact, with blue bars indicating a negative impact and red bars indicating a positive impact.</p>
<p>In this case, we can see that features like <code>tag_count</code> of 6, <code>tag_learning_lab_22</code> and <code>tag_learning_lab_2</code> positively impact the prediction while <code>member_rating</code> of 1 and <code>country_code_IN</code> negatively impact the prediction.</p>
<p>In contrast the plot below shows SHAP values for customer who also has a predicted label of 0 but a higher prediction score (probability) of 0.9;</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/best_model_1/shap_instance_1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
<p>Notice that features that are positively impacting the score include <code>country_code_other</code> and <code>tag_learning_lab_1</code> while features that are negatively impacting the score include <code>country_code_IN</code> and <code>member_rating</code> of 1.</p>
<p>These comparisons underscore the nuanced and individualized way in which different features contribute to the model’s predictions for each customer.</p>
</section>
</section>
<section id="blending-models-ensembling-for-enhanced-performance" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="blending-models-ensembling-for-enhanced-performance"><span class="header-section-number">7.3</span> Blending Models (Ensembling) for Enhanced Performance</h2>
<p>To further improve the predictive performance and extract maximum value from our modeling efforts, we employed a technique called model <a href="https://machinelearningmastery.com/tour-of-ensemble-learning-algorithms/" target="_blank">ensembling</a>. By combining the predictions of multiple models, we aimed to leverage the unique strengths of each model, resulting in a more robust and accurate ensemble prediction.</p>
<p>After blending and <a href="https://www.sciencedirect.com/topics/engineering/model-calibration#:~:text=Model%20calibration%20can%20be%20defined,measurements%20performed%20on%20the%20system" target="_blank">calibrating</a>. the top three models, the resulting ensemble had an AUC of <strong>0.8020</strong> which is a very slight difference in AUC from the individual models;</p>
<table class="table">
<caption>Ensemble AUC of <strong>0.8020</strong> vs Individual Models</caption>
<thead>
<tr class="header">
<th></th>
<th style="text-align: left;">GBM</th>
<th style="text-align: left;">Catboost</th>
<th style="text-align: left;">Ada Boost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Model AUC</strong></td>
<td style="text-align: left;">0.8044</td>
<td style="text-align: left;">0.8015</td>
<td style="text-align: left;">0.7965</td>
</tr>
<tr class="even">
<td><strong>VS Ensemble</strong></td>
<td style="text-align: left;">- 30%</td>
<td style="text-align: left;">+ 0.06%</td>
<td style="text-align: left;">+ 0.69%</td>
</tr>
</tbody>
</table>
<p>This ensemble method showcases how combining individual models can enhance overall predictive accuracy, particularly in complex tasks like lead scoring.</p>
<p>In conclusion, this section provided a comprehensive analysis of our model metrics and interpretation. These metrics allow us to evaluate the performance and effectiveness of different machine learning models in predicting our target variable. Understanding these metrics is crucial for assessing the model’s overall predictive power and ensuring its reliability for decision-making. It is important to note that the significance of these model metrics will be revisited and tied to the return on investment (ROI) analysis in the subsequent sections of this project. By aligning the model’s performance with the business objectives and financial outcomes, we can gain deeper insights into the practical value and impact of the models deployed.</p>
<hr>
</section>
</section>
<section id="experiment-trackinglogging-mlflow" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Experiment Tracking/Logging (MLflow)</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section is part of the <strong>Encode Algorithms</strong> phase of the BSPF.</p>
</div>
</div>
<section id="what-is-mlflow" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="what-is-mlflow"><span class="header-section-number">8.1</span> What is MLflow?</h2>
<p><a href="https://mlflow.org/" target="_blank">MLflow</a> is an open-source platform designed to help data scientists and machine learning engineers track and manage their machine learning experiments. It provides tools for experiment logging, reproducibility, and model management. Developed by Databricks, MLflow aims to simplify the machine learning life-cycle by enabling users to keep track of experiments, compare different models, and efficiently share and deploy ML projects.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/mlflow/dashboard.png" class="img-fluid figure-img" style="width:120.0%"></p>
<figcaption class="figure-caption">Email Lead Scoring MLflow Dashboard</figcaption>
</figure>
</div>
<p>MLflow plays a critical role in the machine learning workflow, addressing several key challenges that data scientists often encounter:</p>
<p><strong>Experiment Tracking:</strong> MLflow allows data scientists to log their experiments with ease. This includes recording the hyperparameters, metrics, and model artifacts associated with each run. Such comprehensive tracking facilitates comparison between different model iterations and helps in selecting the best performing model for deployment.</p>
<p><strong>Reproducibility:</strong> In machine learning, it is crucial to ensure that experiments can be reproduced with the same results. MLflow records the exact versions of libraries, data, and code used in each run, making it easier to replicate the experiments and maintain consistency across different environments.</p>
<p><strong>Collaboration:</strong> In team-based data science projects, collaboration is essential. MLflow enables seamless sharing of experiments, models, and associated artifacts with colleagues, promoting knowledge sharing and fostering a collaborative environment.</p>
<p><strong>Model Management:</strong> MLflow provides functionalities for model versioning and management. This allows data scientists to keep track of model iterations, deploy the best-performing models, and roll back to previous versions if needed.</p>
</section>
<section id="integrating-mlflow-with-pycaret" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="integrating-mlflow-with-pycaret"><span class="header-section-number">8.2</span> Integrating MLflow with PyCaret</h2>
<p>PyCaret, can be seamlessly integrated with MLflow to leverage its powerful experiment tracking capabilities. The integration allows data scientists using PyCaret to log their experiments automatically into MLflow, making it easy to keep track of multiple experiments and compare different models efficiently.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/modelling_png/mlflow/detail.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Finalized Model Details</figcaption>
</figure>
</div>
<p>In this project, MLflow will be a valuable asset as the project progresses and our machine learning models go from development to production. MLflow ensures that the lead scoring process remains organized, reproducible, and collaborative. Its tracking, versioning, and management capabilities contribute to the success and efficiency of the lead scoring system, making MLflow an indispensable component in the data science workflow.</p>
<hr>
</section>
</section>
<section id="return-on-investment-roi" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Return on Investment (ROI)</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section is part of <strong>Step 2: Tie Financial Value of Individual Decisions to Optimize for Profit</strong> under the <strong>Encode Algorithms</strong> phase of the BSPF</p>
</div>
</div>
<p>In the preceding phase of this project, we successfully developed and trained predictive models to identify leads who are more likely to make a purchase. In this phase, our focus shifts to a critical aspect of the project; Return on Investment (ROI) analysis. This involves tying machine learning models to financial value by determining the potential cost or savings for a machine learning model’s prediction. This process is further sub-divided into 2 phases;</p>
<ol type="1">
<li><p>Identifying a threshold for which to categorize leads as <strong>Hot-Leads</strong> or <strong>Cold-Leads</strong> based on the their score (probability of purchase) from the model. This allows us to determine expected value (sales - cost) from only targeting Hot-Leads.</p></li>
<li><p>Optimize the threshold for maximum efficiency and ROI based on senior management decisions.</p></li>
</ol>
<p>Again the primary goal here is to evaluate the financial implications of classifying leads as Hot-Leads (high probability of purchase) or Cold-Leads (low probability of purchase). Hot-Leads will be targeting with sales emails while cold leads will be targeted with value emails such as free products or CTAs to attend webinars that are highly correlated with making a purchase. It is important to understand that there is an inherent cost versus savings trade-off in targeting different types of leads. By not targeting Cold-Leads, we potentially miss out on some revenue, however there is also a savings as we nurture the Cold-Leads and potentially gain more sales in the future.</p>
<section id="initial-threshold-cost-savings" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="initial-threshold-cost-savings"><span class="header-section-number">9.1</span> Initial Threshold &amp; Cost Savings</h2>
<p>This step involved calculating the <a href="http://mlwiki.org/index.php/Cumulative_Gain_Chart">cumulative gain</a> of our machine learning model to enhance our return on investment (ROI). Here the predictions are sorted based on the model’s score (probability) of making a purchase. The Cumulative Gain then measures the proportion of Hot-Leads and Cold-Leads based on a threshold. An arbitrary threshold of <strong>0.95</strong> is used here as the cut off for categorizing Hot-Leads and Cold-Leads.</p>
<p>The table below shows the proportion of hot and cold leads based on this arbitrary 0.95 threshold.</p>
<table class="table">
<caption>Hot / Cold Lead Categorization (95% Gain Threshold)</caption>
<thead>
<tr class="header">
<th><strong>Category</strong></th>
<th><strong>Total Leads</strong></th>
<th><strong>Made Purchase</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cold-Lead</td>
<td>5,528</td>
<td>49</td>
</tr>
<tr class="even">
<td>Hot-Lead</td>
<td>14,691</td>
<td>913</td>
</tr>
</tbody>
</table>
<p>This approach refines our marketing strategy. Instead of targeting all leads with sales emails, we now only focus on sending sales emails to Hot-Leads, while simultaneously nurturing Cold-Leads, whom we’ll expect to make a purchase within 90 days. The result of this would be some initial loss in sales as not all leads are targeted. Based on the <strong>Cold-Lead</strong> row in the table above, we can see that 5528 (27%) of leads will NOT be targeted for sales emails, resulting in potential lost purchases of 49. However, the initial loss in sales will be offset as we nurture cold leads and get them to make a purchase within 90 days.</p>
<section id="expected-value-cost-vs-savings" class="level3" data-number="9.1.1">
<h3 data-number="9.1.1" class="anchored" data-anchor-id="expected-value-cost-vs-savings"><span class="header-section-number">9.1.1</span> Expected Value (Cost vs Savings)</h3>
<p>As highlighted above, there is as cost and savings trade-off from only targeting Hot-Leads while only nurturing Cold-Leads. <strong>Expected Value</strong> in this case, is the financial value associated with various cost and saving scenarios. Let’s deep dive into this expected value calculations for this project, based on our threshold of <strong>0.9</strong> for determining hot and cold leads and the proportion of hot and cold leaders shown the previous table.</p>
<p>Before proceeding, we’ll also need some of the values stated earlier in the <a href="#business-understanding">Business Understanding</a> section -</p>
<table class="table">
<caption>Current Business KPIs</caption>
<thead>
<tr class="header">
<th>Business KPIs</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Email List Size</td>
<td style="text-align: left;">100,000</td>
</tr>
<tr class="even">
<td>Unsubscribes Per Email</td>
<td style="text-align: left;">500</td>
</tr>
<tr class="odd">
<td>Sales Emails Per Month</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td>Unsubscribe Rate</td>
<td style="text-align: left;">0.50%</td>
</tr>
<tr class="odd">
<td>Avg Sales Per Month</td>
<td style="text-align: left;">$250,000</td>
</tr>
<tr class="even">
<td>Customer Conversion Rate</td>
<td style="text-align: left;">5.00%</td>
</tr>
<tr class="odd">
<td>Avg Customer CLV</td>
<td style="text-align: left;">$2,000</td>
</tr>
<tr class="even">
<td>Sales Per Email Sent</td>
<td style="text-align: left;">$50,000</td>
</tr>
</tbody>
</table>
<p>These business KPIs are then used along with subscriber counts from the <a href="#initial-threshold--cost-savings">initial threshold</a> table to generate some preliminary expected value calulations.</p>
<table class="table">
<caption>Preliminary EV Calculations (Based on 95% Threshold and Sample Factor of 5.0)</caption>
<colgroup>
<col style="width: 38%">
<col style="width: 10%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th>KPI</th>
<th style="text-align: left;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Missed Purchase Ratio</td>
<td style="text-align: left;">5.0%</td>
<td style="text-align: left;">Proportion of leads that did not make a purchase</td>
</tr>
<tr class="even">
<td>Made Purchase Ratio</td>
<td style="text-align: left;">94.91%</td>
<td style="text-align: left;">Proportion of leads that made a purchase</td>
</tr>
<tr class="odd">
<td>Savings - Cold Leads Not Targeted</td>
<td style="text-align: left;">$65,616</td>
<td style="text-align: left;">Monthly savings from cold leads not targeted</td>
</tr>
<tr class="even">
<td>Cost - Cold Leads Missed Sales</td>
<td style="text-align: left;">$12,734</td>
<td style="text-align: left;">Missed sales from cold leads not targeted</td>
</tr>
<tr class="odd">
<td>Cost - Hot Leads that Unsubscribe</td>
<td style="text-align: left;">$184,384</td>
<td style="text-align: left;">Missed sales from hot leads that unsubscribe</td>
</tr>
<tr class="even">
<td>Savings - New Monthly Sales</td>
<td style="text-align: left;">$237,266</td>
<td style="text-align: left;">Monthly sales in the first month of new strategy</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-important callout-titled" title="Expected Value Calculations">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Expected Value Calculations
</div>
</div>
<div class="callout-body-container callout-body">
<p>To understand how these values are calculated, please refer to <a href="https://github.com/LucasO21/DS4B_Python_ML_And_APIs/tree/main/analysis/ev_calculation" target="_blank">this</a> excel sheet.</p>
</div>
</div>
<p>Finally these preliminary calculations are then used to calculate expected value. The table below is a breakdown of cost vs savings for this new strategy vs our old strategy of targeting all leads with sales emails.</p>
<table class="table">
<caption>Expected Value of Implementing New Strategy (Based on 95% Threhold and Sample Factor of 5.0)</caption>
<colgroup>
<col style="width: 41%">
<col style="width: 10%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th>EV (with New Lead Scoring Strategy)</th>
<th style="text-align: left;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Revenue in First Month</td>
<td style="text-align: left;">$237,266</td>
<td style="text-align: left;">Sales in first month with new strategy</td>
</tr>
<tr class="even">
<td>New Revenue (Post Nurturing Cold Leads)</td>
<td style="text-align: left;">$290,148</td>
<td style="text-align: left;">Expected total sales after nurturing cold leads</td>
</tr>
<tr class="odd">
<td>Expected Monthly Savings</td>
<td style="text-align: left;">$52,882</td>
<td style="text-align: left;">Expected monthly savings with new strategy</td>
</tr>
<tr class="even">
<td>Expected Saved Customers</td>
<td style="text-align: left;">33</td>
<td style="text-align: left;">Expected saved customers with new strategy</td>
</tr>
</tbody>
</table>
<p><strong>Key Takeaways:</strong> The proposed new strategy, focusing only on Hot-Leads, is expected to generate sales of approximately $237,266 in the first month. This approach differs from the previous strategy where we targeted all leads with sales emails. Despite this initial month’s sales being 5% lower than our usual monthly sales of $250,000, we will save $52,882 each month by not sending sales emails to Cold-Leads. More importantly, by nurturing Cold-Leads effectively and converting them into buyers within 90 days, we anticipate a significant increase in sales. We project our net sales to reach $290,148, marking a 16% rise compared to our current monthly sales.</p>
</section>
</section>
<section id="threshold-optimization-profit-maximization" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="threshold-optimization-profit-maximization"><span class="header-section-number">9.2</span> Threshold Optimization &amp; Profit Maximization</h2>
<p>Our initial ROI analysis used a 95% threshold to decide whether leads are hot (likely to buy) or cold (less likely to buy). This section explores how changing this threshold affects our expected profits and cost savings.</p>
<p>The main aim is to find the sweet spot that maximizes profit. However, we must also consider management’s concerns. For example, using the 95% threshold, we saw a 5% drop in sales in the first month. Senior management may be hesitant about any strategy that reduces monthly sales, even if it could lead to higher sales later on.</p>
<p>The plot below shows our optimization results. On the x-axis, various threshold levels are plotted, ranging from 0 to 1. The y-axis corresponds to the expected value associated with each of these thresholds. A notable feature on the chart is a red dashed line, marking the <strong>88%</strong> threshold. This specific threshold that categorizes leads into Hot or Cold. This is the point where the maximum expected value is realized - in this instance, <strong>$322,893</strong>.</p>
<p>This maximum expected value is achieved under the condition that a minimum of <strong>87%</strong> of the usual monthly sales is preserved, even when implementing the new email lead scoring strategy. Essentially, the <strong>87%</strong> figure acts as a benchmark, ensuring that the new strategy does not significantly erode monthly sales. We refer to this benchmark as the <strong>Monthly Sales Reduction Safeguard</strong>. It serves as a critical parameter, ensuring that while maximizing the expected value from lead scoring, the strategy also safeguards a significant portion of the current monthly sales, maintaining at least <strong>$219,595</strong> in this scenario.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/cost/optimization_thresh_88.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
<p>However, management might consider this 87% safeguard to be too low. They may prefer a higher safeguard, for example, 90%. This means the new strategy should retain at least 90% of our monthly sales. The plot also shows how the expected value changes when we apply this 90% safeguard.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/cost/optimization_thresh_90.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
<p>Notice that with a <strong>90%</strong> safeguard, the expected value drops to <strong>$317,695</strong>. However we see an increase in the current monthly sales retained, <strong>$224,532</strong> in this case.</p>
<p>In conclusion the core of our decision-making process lies in striking a balance between two crucial objectives; achieving higher expected value in the long term vs maintaining current monthly sales levels in the short term. This trade-off presents a strategic challenge that all stakeholders must collectively navigate. The choice between prioritizing immediate sales stability and pursuing potentially greater profits down the line is pivotal. The optimization exercise shows the implications of various thresholds, but it ultimately falls to the collective agreement of all involved parties to determine the most suitable path forward. This decision will shape not only our immediate financial landscape but also our strategic direction in the foreseeable future.</p>
<hr>
</section>
</section>
<section id="backend-deployment-fastapi" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Backend Deployment (FastAPI)</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section is part of the last 2 phases of the BSPF <strong>(Measure Results and Report Financial Impact)</strong>. Deploying ML models and enabling users to engage with these strategies is key to these last 3 phases of the BSPF.</p>
</div>
</div>
<p>We are now progressing into the deployment phase of our email lead scoring project. It is crucial to understand how we integrate the developed models into our business processes. This integration is achieved through the creation of <a href="https://en.wikipedia.org/wiki/API" target="_blank">Application Programming Interfaces</a> (APIs). The APIs serve as communication gateways between our data models and the user-facing application, in this case, a Streamlit app. This app will enable senior management and other marketing stakeholders to interact with and benefit from our email lead scoring strategies.</p>
<section id="api" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="api"><span class="header-section-number">10.1</span> API</h2>
<p>Our API, developed using <a href="https://fastapi.tiangolo.com/" target="_blank">FastAPI</a>, features several endpoints, each serving a specific purpose;</p>
<ol type="1">
<li><p>Main Endpoint <code>("/")</code> This is the landing page of our API. It provides users with a welcoming interface and guides them to the API documentation. This endpoint is crucial for user orientation and ease of use.</p></li>
<li><p>Get Email Subscribers <code>("/get_email_subscribers")</code> This <code>GET</code> endpoint exposes our email subscriber data. When accessed, it returns the data with scored leads in JSON format. It’s vital for stakeholders to view and understand the current leads database.</p></li>
<li><p>Data Reception <code>("/data")</code> A <code>POST</code> endpoint designed to receive data. Users can submit data in JSON format, which is then processed and stored. This endpoint is essential for updating our leads database with new information.</p></li>
<li><p>Lead Scoring Prediction <code>("/predict")</code> This <code>POST</code> endpoint is the heart of our API. It accepts lead data and returns scored leads, using our proprietary lead scoring models. It enables the application of our predictive model to new or existing data for real-time lead scoring.</p></li>
<li><p>Lead Scoring Strategy Calculation <code>("/calculate_lead_strategy")</code> Another <code>POST</code> endpoint, it calculates and optimizes lead scoring strategies based on various parameters (e.g., sales reduction safeguard, email list size). This is crucial for strategic decision-making and marketing optimization.</p></li>
</ol>
<p>APIs play a pivotal role in the data science lifecycle, especially in the deployment phase. They enable the seamless integration of data science models into business processes, making predictive insights accessible and actionable for decision-makers. APIs facilitate real-time data processing and interaction, which is essential for dynamic and responsive business strategies.</p>
<hr>
</section>
</section>
<section id="frontend-deployment-streamlit" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Frontend Deployment (Streamlit)</h1>
<div class="callout callout-style-default callout-note callout-titled" title="BSPF Phase">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
BSPF Phase
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section is part of the last 2 phases of the BSPF <strong>(Measure Results and Report Financial Impact)</strong>. Deploying ML models and enabling users to engage with these strategies is key to these last 2 phases of the BSPF.</p>
</div>
</div>
<p>In this final phase of the email lead scoring project, we transition from the development of <a href="#api-endpoints">API endpoints</a> for our lead scoring strategy to their practical application. Recognizing the importance of deployment in the lifecycle of any data science project, we integrated these APIs into a user-friendly <a href="https://streamlit.io/" target="_blank">Streamlit</a> application. This step is instrumental in transforming our analytical insights into actionable tools, directly accessible to senior management and other marketing stakeholders.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Streamlit App">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Streamlit App
</div>
</div>
<div class="callout-body-container callout-body">
<!--You can access the Streamlit app [here](). -->
<p>Please be aware that the Streamlit application is currently in the final stages of development and has not yet been deployed to a cloud platform. As soon as the deployment is complete, a direct link will be added to this write-up.</p>
</div>
</div>
<p>When first accessed, the link brings the user to an authentication screen where they will need to input their secret keys.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/streamlit/auth.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>Once logged in successfully, the user will be prompted to upload a csv file with the leads scored data. In an enterprise setting, we will be connecting the app to the company’s database.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/streamlit/browse_csv.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>Next, the user can adjust the monthly sales and <a href="#threshold-optimization--profit-maximization">monthly sales safeguard</a>, based on the strategy they would like to implement, then hit the <code>Run Analysis</code> button.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/streamlit/safeguard.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>Once the analysis is complete, the user will be able to see the expected value table and plot based on their monthly sales and monthly sales safeguard inputs.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/streamlit/plot.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>Additionally the user can also see and download the lead scoring strategy data with leads information and their Hot-Lead/Cold-Lead classification.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="png/streamlit/strategy.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>In conclusion, the successful deployment of our Streamlit application is a crucial step in our email lead scoring project. This user-friendly platform is key in making our advanced data models accessible and practical for everyday use within the company. By providing senior management and marketing teams with this tool, we enable them to easily measure results and understand the financial impact of our lead scoring strategy. This application is more than just a technical achievement; it’s a vital component in ensuring that our project’s insights are effectively utilized, leading to informed decisions and a clearer understanding of our strategy’s financial benefits.</p>
<hr>
</section>
<section id="conclusion" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Conclusion</h1>
<p>This project has successfully demonstrated the integration of advanced data science techniques into practical business solutions for email lead scoring. The journey from conceptualization to the development of a functional model highlights key achievements and insights.</p>
<p><strong>Strategic Application of Data Science:</strong> The core of this project was the strategic application of machine learning to enhance email marketing efforts. By employing predictive modeling and feature engineering, we have developed a robust system that can accurately identify and score potential leads. This approach allows for a more targeted and efficient use of marketing resources, potentially leading to increased conversion rates and customer engagement.</p>
<p><strong>Technical Implementation:</strong> A significant aspect of this project was the technical implementation of our models in a user-friendly interface, achieved through the development of a Streamlit application. This interface serves as a bridge, making complex analytical models accessible and usable for decision-makers within the organization. It represents a crucial step in translating data-driven insights into actionable business strategies.</p>
<p><strong>Financial Implications and Future Directions:</strong> The ROI analysis conducted as part of this project illustrates the potential financial benefits of implementing a lead scoring system. It offers a glimpse into how optimizing lead targeting can impact the bottom line. However, the full potential of these models will be realized once the Streamlit application is deployed and integrated into the company’s daily operations.</p>
<p>In conclusion, this project not only showcases the practical application of machine learning in a business context but also sets the stage for further innovations in data-driven marketing strategies. The insights and methodologies developed here can serve as a blueprint for similar initiatives in the future, driving forward the agenda of data-centric decision-making in the business world.</p>
<hr>
</section>
<section id="next-steps" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> Next Steps</h1>
<ul>
<li>Deploy Streamlit app to a cloud platform.</li>
<li>Continue learning how to integrate FastAPI with web applications.</li>
</ul>
<hr>
<p>Reproducible code is available on <a href="https://github.com/LucasO21/DS4B_Python_ML_And_APIs" target="_blank">Github</a>.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb1" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Machine Learning for Email Lead Scoring"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "A Case Study of Predictive Analytics in Marketing"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> 12/02/2023</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Lucas Okwudishu</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> true</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">    css: styles.css</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 3</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: flatly</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: false</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">    page-layout: article</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="an">link-citations:</span><span class="co"> true</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [predictive analytics, marketing analytics, machine learning, roi analysis]</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> "course_workflow.png"</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>Businesses face challenges in identifying and prioritizing potential customers </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>and/or identifying the future purchase potential of current customers based on </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>their email interactions, leading to sub-optimal allocation of resources and missed </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>opportunities.</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>Email lead scoring plays a crucial role in determining the quality and conversion </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>potential of leads generated through email marketing campaigns. Email lead scoring </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>is a method used by marketers and sales teams to evaluate and prioritize <span class="co">[</span><span class="ot">leads</span><span class="co">](https://www.wrike.com/marketing-guide/faq/what-is-a-lead-in-marketing/)</span>{target="_blank"}</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>based on their potential to become customers. It involves assigning scores or ratings </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>to individual leads based on their behavior, interactions, and other characteristics. </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>However, the traditional manual lead scoring methods are time-consuming, subjective, </span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>and often produce inconsistent results. Additionally, these methods do not fully leverage the available data, such as email content, sender information, and historical customer interactions.</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>Machine learning based solutions can effectively evaluate the probability of leads converting into customers based on various data points extracted from email interactions. This solution should take into account factors like email open rates, click-through rates, response times, engagement patterns, and historical customer data to provide a comprehensive lead score.</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>By leveraging machine learning algorithms, such as classification models businesses can create a reliable and automated system that can accurately score and rank email leads according to their conversion potential. The solution will empower email marketers to prioritize their efforts and resources more effectively, enabling them to focus on the most promising leads and improve overall sales and marketing efficiency.</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>**Note:** This project was completed as part of the <span class="co">[</span><span class="ot">Python for Machine Learning and APIs</span><span class="co">](https://university.business-science.io/p/ds4b-201-p-machine-learning-and-apis-with-python?el=website)</span> course by <span class="co">[</span><span class="ot">Business Science University</span><span class="co">](https://www.business-science.io/)</span>{target="_blank"}.</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/title/course_workflow.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>The project demonstrates and end-to-end email lead scoring solution for a business, from initial analysis, to modeling, to deployment. Skills demonstrated in this project include -</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Project management. <span class="dv">&amp;#9989;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Business understanding. <span class="dv">&amp;#9989;</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Business return on investment and sensitivity analysis. <span class="dv">&amp;#9989;</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Exploratory data analysis. <span class="dv">&amp;#9989;</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Machine learning (using tools like python, pycaret, mlflow). <span class="dv">&amp;#9989;</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Model deployment (using tools like fastapi and streamlit). <span class="dv">&amp;#9989;</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>Above all, the project demonstrates how to solve key business problems in the real world.</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="fu"># Problem Statement &amp; Objective</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="co">::: {.callout-note title="BSPF Phase"}</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="co">This section falls under the **View Business as a Machine** Phase of the [BSPF](https://www.business-science.io/business/2018/06/19/business-science-problem-framework.html).</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="co">:::</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="co">--&gt;</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>As mentioned earlier, this analysis provides a lead scoring solution for an online educational company. The company offers training courses (their main product) in data science and has a large email list of **100,000** subscribers (or leads), with a monthly growth rate of **6,000** new subscribers. The marketing team also sends out **5** emails per month and the business's sales cycle generates approximately **$250,000** in revenue per month.</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>::: {.callout-important}</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>**Subscribers** and **Leads** will be used interchangeably throughout this project. Note they both refer to the same thing.</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>However, the email list also experiences a significant number of unsubscribes, about **500** per email, resulting in a total of **2,500** unsubscribes per month.</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>This high unsubscribe rate indicates potential inefficiencies in the email marketing strategy. In addition, high unsubscribe rates can result in reduced revenue, especially if the business relies heavily on email marketing as a primary channel for generating leads and driving conversions. To sustain and increase revenue, it is crucial to optimize the email marketing approach and maximize customer conversion rates. The business also believes that nurturing lost customers could potential convert about **5%** of them back into active customers.</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="fu">## Objective</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>Given these key insights, the problem at hand is to develop an effective email list scoring and segmentation strategy. The goal is to identify and prioritize the most valuable leads (in terms of probability of making a purchase) to target for sales emails, while also identifying leads with a low probability of purchase to nurture and increase their likelihood to purchase.</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>In summary, the primary objective is to leverage email list scoring and segmentation techniques to improve customer engagement, reduce unsubscribes, increase customer conversion rates, and ultimately maximize revenue and customer lifetime value.</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>Now that we have a general understanding of the problem statement and the objective, the next sections will focus on a business solution process using the</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>Business Science Problem Framework.</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="fu">## What Is the Business Science Problem Framework</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/title/bspf_framework.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>The <span class="co">[</span><span class="ot">Business Science Problem Framework</span><span class="co">](https://www.business-science.io/bspf.html)</span>{target="_blank"} (BSPF) is a structured approach used for solving complex business problems, especially those involving data science and analytics. It's designed to streamline the process of transforming a business problem into an analytical problem, and then into a data science solution.</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a><span class="fu"># Business Understanding</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>This section falls under the **Understanding drivers** Phase of the <span class="co">[</span><span class="ot">BSPF</span><span class="co">](https://www.business-science.io/business/2018/06/19/business-science-problem-framework.html)</span>{target="_blank"}.</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>Addressing business challenges like these demands significant resources, including both time and money. Therefore a key question to ask is *"is this problem worth solving?"*</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>In this phase, the key is to highlight why this problem should be a business priority. One way to achieve this is by calculating the cost of the business problem by understanding how high unsubscribe rates lead to lower revenue. Our goals in this phase include -</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Cost Assessment - Assign a cost to high unsubscribe rates, thus giving the business a point estimate of annual costs of unsubscribe rates. This step does NOT account for the growth rate of email lists.</span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Improve Cost Analysis - Improve on cost assessment by accounting for email list growth uncertainty.</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Business Cost Simulation - This step is necessary to model costs under varying key inputs, especially when accounting for uncertainty.</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a><span class="fu">## Cost Assessment</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>Given the values highlighted in the <span class="co">[</span><span class="ot">problem statement</span><span class="co">](#problem-statement--objective)</span> section, we can estimate the monthly lost revenue (we'll refer to this as cost going forward) due to unsubscribes to be around **$250K** per month (or **$3M** annually), not factoring in email list growth rate. This hidden cost is shown in the table below -</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/cost/cost_scenario_table.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>After factoring in a **3.5%** monthly email list growth rate (last column), we can expect the lost revenue due to unsubscribes to rise to around **$364K** per month (or **$4.3M** per year), an increase of **46%** in lost revenue.</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>We can see the high cost of this problem which is the lost revenue to the business. However, the values shown in the table above do not factor in uncertainty. We can thus improve on our cost assessment by factoring in uncertainty in some of the drivers. Let assume some monthly variability in email list growth rate and conversion rate. The heatmap below shows a cost simulation with variability. The y-axis represents various levels of customer conversion rate while the x-axis represents various levels of email list growth rate;</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/cost/cost_simulation.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>We can see that regardless of how the drivers vary, we can still expect to see annual costs ranging from **$2.61M** to **$4.38M**. Thus this is definitely a problem worth solving.</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>At this point, a key question is *"can we reduce the unsubscribe rate?"*. Recall that the business is losing **500** subscribers for every email sent out. What if we can reduce that number by **50%** (or **250**), while maintaining **90%** of revenue. What impact will that have on the business?</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>The only problem is that we still do not know a lot about what causes a subscriber to make a purchase. If we do, we can focus on targeting the ones that are more likely to purchase with sales emails and nurture the ones who are unlikely to covert at the moment. This will help with our goal of reducing the unsubscribe rate while maintaining **90%** of revenue.</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Understanding</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>This section falls under the **Understand The Drivers** Phase of the <span class="co">[</span><span class="ot">BSPF</span><span class="co">](https://www.business-science.io/business/2018/06/19/business-science-problem-framework.html)</span>{target="_blank"}.</span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>This phase requires understanding the data available at our disposal to tackle this problem. The visual below gives an overview of the company's crm database including table and field descriptions. Connecting arrows show how each table can be linked to other tables based on common fields.</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/other/crm_database.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>::: {.callout-important}</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>**Note:** We will not be using the <span class="in">`website`</span> table in this project.</span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exploratory Data Analysis</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>After some initial data manipulation to get the data in the right format we need for analysis, including adding a target feature which is a binary flag of if a lead has made a previous purchase or not (we'll call this target feature <span class="in">`made_purchase`</span>), we can then begin to do some initial exploratory analysis to get a sense what features in our dataset could be predictive of leads making a purchase.</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>First, lets analyze our target feature <span class="in">`made_purchase`</span>.</span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a><span class="fu">### Proportion of Subscribers with Previous Purchase</span></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/eda/made_purchase_prop.png)</span>{width=60% fig-align="center"}</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>**Observation:** Only **5%** of leads have made a previous purchase, meaning we are dealing with a highly <span class="co">[</span><span class="ot">imbalanced dataset</span><span class="co">](https://developers.google.com/machine-learning/data-prep/construct/sampling-splitting/imbalanced-data)</span>{target="_blank"}.</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a><span class="fu">### Member Rating vs Made Purchase</span></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>The plot below shows the different values of <span class="in">`member_rating`</span> vs the proportion of <span class="in">`made_purchase`</span> for users with each value of <span class="in">`member_rating`</span> -</span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/eda/member_rating_vs_made_purchase.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>**Observation:** <span class="in">`member_rating`</span> appears to be quite predictive of <span class="in">`made_purchase`</span>. We can see that the likelihood of a user making a purchase increases 3x when the <span class="in">`member_rating`</span> goes from 1 to 2. Additionally the likelihood of making a purchase increases 5x when the <span class="in">`member_rating`</span> goes from 2 to 5.</span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a><span class="fu">### Country Code vs Made Purchase</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>The plot below shows <span class="in">`country_code`</span> along with the within group <span class="in">`made_purchase`</span> proportion, for the top 10 countries in terms of count of users -</span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/eda/country_code_vs_made_purchase.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>**Observation:** <span class="in">`country_code`</span> also appears to be quite predictive of <span class="in">`made_purchase`</span> as well.For example we can see that while the US has the most users (over 3,500), the proportion of US users who have made a purchase is ~10%. However a country like AU, which has less than 500 users has a higher proportion of users who have made a purchase (~12%).</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a><span class="fu">### Tag Count vs Made Purchase</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>The plot below shows <span class="in">`tag_count`</span> along with the within group <span class="in">`made_purchase`</span> proportion, for a selected number of <span class="in">`tag_count`</span>. Recall that tags here refer to various events like webinars. Therefore <span class="in">`tag_count`</span> refers to the number of such events a user has attended -</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/eda/tags_vs_made_purchase.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>**Observation:** We can see that if a subscriber has 40 or more tags (events), they are 100% likely to make a purchase. That likelihood drops as <span class="in">`tag_count`</span> decreases. Note that a lead with 0 tags only have a 2% likelihood of making a purchase. For those with 0 tags (meaning they have not attended any events yet) we may not want to send them emails just yet. We may want to try and nurture them to attend more events before trying to get them to make a purchase. Overall if the business can get leads to attend more events, it drastically increases their likelihood of making a purchase.</span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a><span class="fu">### Correlation</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>The plot below is a correlation heatmap of numeric features only -</span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/eda/corr_heatmap.png)</span>{width=60% fig-align="center"}</span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>**Observation**: These correlation values further validate some of the data we saw earlier. We can see that <span class="in">`tag_count`</span> and <span class="in">`member_rating`</span> do show a fairly high correlation with <span class="in">`made_purchase`</span>.</span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a><span class="fu"># Formulating KPIs</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>This section falls under the **Measure the Drivers/Uncover Problems and Opportunities** phase of the BSPF</span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>Now that we have a bit more understanding of some of the potential drivers of <span class="in">`made_purchase`</span>, we may want to develop some hypothesis about how to improve the likelihood of a lead making a purchase by applying some of the insights we just learned. For example;</span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;&gt; *"Can we reduce the number of sales emails sent to subscribers by 30% and still maintain 99% of sales revenue?"*</span></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>Can we segment our email list into hot and cold leads? Hot-Leads meaning those who are more likely to purchase (subscribers with high <span class="in">`member_rating`</span> for example), and Cold-Leads meaning those less likely to purchase (subscribers with low <span class="in">`member_rating`</span>). This way we could come up with a strategy to only send sales emails to hot leads, while nurturing cold leads to increase their likelihood of purchase.</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>One of such KPIs could be to increase the median <span class="in">`tag_count`</span>. Looking at the table below, we can see that the median <span class="in">`tag_count`</span> for those who have not made a purchase is 0 while for those who have made a purchase, the median <span class="in">`tag_count`</span> is 2. Thus, we could establish a KPI for Cold-Leads to get their median <span class="in">`tag_count`</span> to 2 or more (attend 2 or more webinars/events) and increase their likelihood of making a purchase.</span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>|   Category   | Total Leads | Made Purchase | </span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>|--------------|:----------- |:--------------|</span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>| Cold-Leads   | 5,528       | 49            |</span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>| Hot-Leads    | 14,691      | 913           |</span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>: Ensemble AUC of **0.8020** vs Individual Models</span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a><span class="fu"># Feature Engineering</span></span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>This section falls under the **Encode Algorithms** phase of the BSPF</span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a>Now that we have a better understanding of our data and what features might be predictive of a subscriber making a purchase, the next phase in our workflow is creating preprocessing pipelines to get our data in the right form for machine learning algorithms. **Feature Engineering** is the process of selecting, manipulating and transforming raw data into features that can be used in supervised learning algorithms.</span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a>Understanding the business context and having domain expertise can greatly influence the choice and creation of features. Different businesses and domains may have unique characteristics, specific factors that impact the target variable, and relevant attributes that need to be considered during feature engineering.</span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a>For this analysis, the following addition features were created from existing data;</span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`optin_days`</span> - Generated from <span class="in">`optin_time`</span>. This is the number of days the subscriber has been on the company's email list.</span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`email_provider`</span> - Generated from <span class="in">`user_email`</span>. Multiple email providers (such as gmail, hotmail) etc are being used by subscribers, and could be helpful in predicting made_purchase.</span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`activity_per_time`</span> - Generated by dividing <span class="in">`tag_count`</span> (count of events a subscriber has attended) by the newly created <span class="in">`optin_days`</span>.</span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>One-To-Many Features (<span class="in">`tags`</span>) - These are binary features (0s or 1s) for each tag (event) to indicate if a user attend the event or not.</span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>Reducing High Cardinality - Applied to <span class="in">`country_code`</span>. Using a threshold of 6, this process lumps countries that have less than 6 subscribers in the dataset into an <span class="in">`other`</span> category.</span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a>To demonstrate the importance of feature engineering in this analysis, we'll show an example of some of the new features created and their relationship with <span class="in">`made_purchase`</span> (or target). The plot below shows the proportion of leads who made a purchase for 9 randomly selected tags (events). Looking at the first event (<span class="in">`tag_learning_lab_09`</span>) we can see that if a lead attended that event, they have a 19% likelihood of making a purchase vs only 5% if they did not attend the event. For <span class="in">`tag_learning_lab_12`</span>, the likelihood of making a purchase if they attended that event is 28% vs 5% if they did not. We can also see similar trends for the other tags.</span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/eda/attended_event_vs_made_purchase_prop.png)</span>{width=80% fig-align="center"}</span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a>This indicates that these additional features could be indicative of <span class="in">`made_purchase`</span>.</span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-248"><a href="#cb1-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-249"><a href="#cb1-249" aria-hidden="true" tabindex="-1"></a><span class="fu"># Machine Learning</span></span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a>This section falls under the **Encode Alogrithms** phase of the BSPF</span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a>This phase of the analysis focuses on encoding algorithms for email lead scoring. As a reminder the goal is to predict and score email subscribers that are likely to make a purchase, based on features identified and engineered in previous sections. Therefore this is a binary classification problem. For modeling, we use the <span class="co">[</span><span class="ot">Pycaret</span><span class="co">](https://pycaret.org/)</span>{target="_blank"} python package. Pycaret is an open-source, low code machine learning library in Python that automates machine learning workflows. Pycaret is not only a package for building machine learning models, instead it is an end-to-end machine learning and model management tool that makes it easy to experiment with multiple machine learning models, while logging all experiments.</span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a><span class="fu">## Testing Multiple Models</span></span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a>Several models were initially tested, using <span class="co">[</span><span class="ot">Area Under the Curve</span><span class="co">](https://developers.google.com/machine-learning/crash-course/classification/roc-and-auc)</span>{target="_blank"} (AUC) as the key metric. Higher AUC indicates a better-performing model in distinguishing positive and negative leads. The chart below shows the AUC along with other metrics from initial modeling. We can see the top 3 models in terms of AUC are Gradient Boosting Classifier (0.8044) CatBoost Classifier (0.8015) and Ada Boost Classifier (0.7965).</span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/modelling_png/best_models.png)</span>{width=80% fig-align="center"}</span>
<span id="cb1-261"><a href="#cb1-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-262"><a href="#cb1-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-263"><a href="#cb1-263" aria-hidden="true" tabindex="-1"></a><span class="fu">## Model Metrics</span></span>
<span id="cb1-264"><a href="#cb1-264" aria-hidden="true" tabindex="-1"></a>Here we can examine metrics for the Catboost model.</span>
<span id="cb1-265"><a href="#cb1-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-266"><a href="#cb1-266" aria-hidden="true" tabindex="-1"></a>::: {.callout-important title="Model Metrics (Catboost)"}</span>
<span id="cb1-267"><a href="#cb1-267" aria-hidden="true" tabindex="-1"></a>The choice of Catboost, a tree-based model, is driven by its inherent advantage in explainability, which is critical for understanding model decisions and behavior. It's important to note that the final model selection will be determined in the Return on Investment (ROI) section of the course. However, it is worth mentioning that all the models under consideration exhibit very similar performance metrics. Consequently, regardless of the final choice, we can anticipate that the selected model will demonstrate metrics comparable to those of the Catboost model. This consistency across models ensures reliability in the anticipated performance, irrespective of the specific model chosen.</span>
<span id="cb1-268"><a href="#cb1-268" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-269"><a href="#cb1-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-270"><a href="#cb1-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-271"><a href="#cb1-271" aria-hidden="true" tabindex="-1"></a><span class="fu">### AUC-ROC Plot</span></span>
<span id="cb1-272"><a href="#cb1-272" aria-hidden="true" tabindex="-1"></a>An AUC-ROC (Area Under the Receiver Operating Characteristic Curve) plot is a graphical representation that summarizes the performance of a binary classification model. It showcases the model's ability to distinguish between positive and negative instances by plotting the true positive rate against the false positive rate. The AUC value, ranging from 0 to 1, quantifies the model's accuracy, with a higher value (higher curve towards 1) indicating better performance. The AUC-ROC plot enables data scientists and decision-makers to assess and compare models, aiding in the selection and optimization of classification algorithms.</span>
<span id="cb1-273"><a href="#cb1-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-274"><a href="#cb1-274" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/modelling_png/best_model_1/auc_best_model_1.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-275"><a href="#cb1-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-276"><a href="#cb1-276" aria-hidden="true" tabindex="-1"></a><span class="fu">### Confusion Matrix</span></span>
<span id="cb1-277"><a href="#cb1-277" aria-hidden="true" tabindex="-1"></a>The confusion matrix is a tabular representation that provides a comprehensive summary of the performance of a classification model. It organizes predictions made by the model into four categories: true positives (TP), true negatives (TN), false positives (FP), and false negatives (FN).</span>
<span id="cb1-278"><a href="#cb1-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-279"><a href="#cb1-279" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>True Positive (TP): The model correctly predicts the positive class.</span>
<span id="cb1-280"><a href="#cb1-280" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>True Negative (TN): The model correctly predicts the negative class.</span>
<span id="cb1-281"><a href="#cb1-281" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>False Positive (FP): The model incorrectly predicts the positive class when it should have been negative (Type I error).</span>
<span id="cb1-282"><a href="#cb1-282" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>False Negative (FN): The model incorrectly predicts the negative class when it should have been positive (Type II error).</span>
<span id="cb1-283"><a href="#cb1-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-284"><a href="#cb1-284" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/modelling_png/best_model_1/cm_best_model_1.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-285"><a href="#cb1-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-286"><a href="#cb1-286" aria-hidden="true" tabindex="-1"></a>Let's understand the confusion matrix above;</span>
<span id="cb1-287"><a href="#cb1-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-288"><a href="#cb1-288" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>24 predictions (bottom right) are true positives, these are the subscribers the model predicted will make a purchase and they did make a purchase.</span>
<span id="cb1-289"><a href="#cb1-289" aria-hidden="true" tabindex="-1"></a>27 (top right) are false positives. The model predicted them to make a purchase and they did not. This is where we might have wasted effort.</span>
<span id="cb1-290"><a href="#cb1-290" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>168 (bottom left) are false negatives. The model predicted they will not make a purchase but they did. These are missed opportunities.</span>
<span id="cb1-291"><a href="#cb1-291" aria-hidden="true" tabindex="-1"></a>3765 (top left) are true negatives. The model predicted they will not make a purchase and they did not. There is no impact for these.</span>
<span id="cb1-292"><a href="#cb1-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-293"><a href="#cb1-293" aria-hidden="true" tabindex="-1"></a><span class="fu">### Feature Importance</span></span>
<span id="cb1-294"><a href="#cb1-294" aria-hidden="true" tabindex="-1"></a>A feature importance plot is a graphical representation that helps us understand the relative importance of different features or variables in a predictive model. It provides insights into what factors or variables have the most significant impact on the outcome or target variable. The plot below show feature importance for the Catboost model;</span>
<span id="cb1-295"><a href="#cb1-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-296"><a href="#cb1-296" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/modelling_png/best_model_1/vip_best_model_1.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-297"><a href="#cb1-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-298"><a href="#cb1-298" aria-hidden="true" tabindex="-1"></a>You can see that the model shows the most importance features to be <span class="in">`optin_days`</span>, <span class="in">`member_rating`</span> and <span class="in">`country_code_US`</span>. Note that this order may vary for another model. Different machine learning models can have different ranking for feature importance due to their inherent characteristics and the Algorithms they employ to make predictions. Factors such as model architecture, algorithmic approach, feature interactions, model assumptions, all play a part in how a model ranks feature imporance.</span>
<span id="cb1-299"><a href="#cb1-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-300"><a href="#cb1-300" aria-hidden="true" tabindex="-1"></a><span class="fu">### Shap Values</span></span>
<span id="cb1-301"><a href="#cb1-301" aria-hidden="true" tabindex="-1"></a>A SHAP (SHapley Additive exPlanations) values plot is a visual representation that provides insights into the contribution of individual features to the predictions made by a machine learning model. It is based on Shapley values, a concept from cooperative game theory, which assigns a value to each feature by measuring its impact on the prediction compared to its absence or average value. The SHAP values plot displays the magnitude and direction of each feature's impact on the model predictions, allowing for a comprehensive understanding of how different features influence the outcomes. It helps identify which features have the most significant positive or negative influence on predictions and provides a clear picture of how the model is making decisions based on different feature values. This plot enables users, including business leaders, to interpret and explain the model's behavior and make informed decisions based on the feature contributions.</span>
<span id="cb1-302"><a href="#cb1-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-303"><a href="#cb1-303" aria-hidden="true" tabindex="-1"></a>The plot below shows shap values for the Catboost model;</span>
<span id="cb1-304"><a href="#cb1-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-305"><a href="#cb1-305" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/modelling_png/best_model_1/shap_summary.png)</span>{width=70% fig-align="center"}</span>
<span id="cb1-306"><a href="#cb1-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-307"><a href="#cb1-307" aria-hidden="true" tabindex="-1"></a>The higher the shap value is (x-axis), the higher the likelihood of positive. For example we can see the higher shap values for member_rating and tag_count, meaning that subscribers who have higher values for these 2 features are more likely to predicted as making a purchase.</span>
<span id="cb1-308"><a href="#cb1-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-309"><a href="#cb1-309" aria-hidden="true" tabindex="-1"></a><span class="fu">### Shap Values (Specific Observations)</span></span>
<span id="cb1-310"><a href="#cb1-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-311"><a href="#cb1-311" aria-hidden="true" tabindex="-1"></a>Shap values can also be created for specific observations or individual leads in this case. Below is the plot of shap values for a customer with a predicted label of 0 and prediction score (probability) of 0.67.</span>
<span id="cb1-312"><a href="#cb1-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-313"><a href="#cb1-313" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/modelling_png/best_model_1/shap_instance_0.png)</span>{width=90% fig-align="center"}</span>
<span id="cb1-314"><a href="#cb1-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-315"><a href="#cb1-315" aria-hidden="true" tabindex="-1"></a>The plot shows how the prediction of the model was influenced by each input feature, by displaying the contribution of each feature as a horizontal bar on the plot. The length of the bar represents the magnitude of each feature's SHAP value, with longer bars indicating a larger impact on the prediction.</span>
<span id="cb1-316"><a href="#cb1-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-317"><a href="#cb1-317" aria-hidden="true" tabindex="-1"></a>The color of the bars indicate the direction of the impact, with blue bars indicating a negative impact and red bars indicating a positive impact.</span>
<span id="cb1-318"><a href="#cb1-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-319"><a href="#cb1-319" aria-hidden="true" tabindex="-1"></a>In this case, we can see that features like <span class="in">`tag_count`</span> of 6, <span class="in">`tag_learning_lab_22`</span> and <span class="in">`tag_learning_lab_2`</span>  positively impact the prediction while <span class="in">`member_rating`</span> of 1 and <span class="in">`country_code_IN`</span> negatively impact the prediction.</span>
<span id="cb1-320"><a href="#cb1-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-321"><a href="#cb1-321" aria-hidden="true" tabindex="-1"></a>In contrast the plot below shows SHAP values for customer who also has a predicted label of 0 but a higher prediction score (probability) of 0.9;</span>
<span id="cb1-322"><a href="#cb1-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-323"><a href="#cb1-323" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/modelling_png/best_model_1/shap_instance_1.png)</span>{width=90% fig-align="center"}</span>
<span id="cb1-324"><a href="#cb1-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-325"><a href="#cb1-325" aria-hidden="true" tabindex="-1"></a>Notice that features that are positively impacting the score include <span class="in">`country_code_other`</span> and <span class="in">`tag_learning_lab_1`</span> while features that are negatively impacting the score include <span class="in">`country_code_IN`</span> and <span class="in">`member_rating`</span> of 1.</span>
<span id="cb1-326"><a href="#cb1-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-327"><a href="#cb1-327" aria-hidden="true" tabindex="-1"></a>These comparisons underscore the nuanced and individualized way in which different features contribute to the model's predictions for each customer.</span>
<span id="cb1-328"><a href="#cb1-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-329"><a href="#cb1-329" aria-hidden="true" tabindex="-1"></a><span class="fu">## Blending Models (Ensembling) for Enhanced Performance</span></span>
<span id="cb1-330"><a href="#cb1-330" aria-hidden="true" tabindex="-1"></a>To further improve the predictive performance and extract maximum value from our modeling efforts, we employed a technique called model <span class="co">[</span><span class="ot">ensembling</span><span class="co">](https://machinelearningmastery.com/tour-of-ensemble-learning-algorithms/)</span>{target="_blank"}. By combining the predictions of multiple models, we aimed to leverage the unique strengths of each model, resulting in a more robust and accurate ensemble prediction.</span>
<span id="cb1-331"><a href="#cb1-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-332"><a href="#cb1-332" aria-hidden="true" tabindex="-1"></a>After blending and <span class="co">[</span><span class="ot">calibrating</span><span class="co">](https://www.sciencedirect.com/topics/engineering/model-calibration#:~:text=Model%20calibration%20can%20be%20defined,measurements%20performed%20on%20the%20system)</span>{target="_blank"}. the top three models, the resulting ensemble had an AUC of **0.8020** which is a very slight difference in AUC from the individual models;</span>
<span id="cb1-333"><a href="#cb1-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-334"><a href="#cb1-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-335"><a href="#cb1-335" aria-hidden="true" tabindex="-1"></a>|                 | GBM     | Catboost  | Ada Boost |</span>
<span id="cb1-336"><a href="#cb1-336" aria-hidden="true" tabindex="-1"></a>|-----------------|:------- |:----------|:----------|</span>
<span id="cb1-337"><a href="#cb1-337" aria-hidden="true" tabindex="-1"></a>| **Model AUC**   | 0.8044  | 0.8015    |   0.7965  |</span>
<span id="cb1-338"><a href="#cb1-338" aria-hidden="true" tabindex="-1"></a>| **VS Ensemble** | - 30%   | + 0.06%   |  + 0.69%  |</span>
<span id="cb1-339"><a href="#cb1-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-340"><a href="#cb1-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-341"><a href="#cb1-341" aria-hidden="true" tabindex="-1"></a>: Ensemble AUC of **0.8020** vs Individual Models</span>
<span id="cb1-342"><a href="#cb1-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-343"><a href="#cb1-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-344"><a href="#cb1-344" aria-hidden="true" tabindex="-1"></a>This ensemble method showcases how combining individual models can enhance overall predictive accuracy, particularly in complex tasks like lead scoring.</span>
<span id="cb1-345"><a href="#cb1-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-346"><a href="#cb1-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-347"><a href="#cb1-347" aria-hidden="true" tabindex="-1"></a>In conclusion, this section provided a comprehensive analysis of our model metrics and interpretation. These metrics allow us to evaluate the performance and effectiveness of different machine learning models in predicting our target variable. Understanding these metrics is crucial for assessing the model's overall predictive power and ensuring its reliability for decision-making. It is important to note that the significance of these model metrics will be revisited and tied to the return on investment (ROI) analysis in the subsequent sections of this project. By aligning the model's performance with the business objectives and financial outcomes, we can gain deeper insights into the practical value and impact of the models deployed.</span>
<span id="cb1-348"><a href="#cb1-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-349"><a href="#cb1-349" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-350"><a href="#cb1-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-351"><a href="#cb1-351" aria-hidden="true" tabindex="-1"></a><span class="fu"># Experiment Tracking/Logging (MLflow)</span></span>
<span id="cb1-352"><a href="#cb1-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-353"><a href="#cb1-353" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-354"><a href="#cb1-354" aria-hidden="true" tabindex="-1"></a>This section is part of the **Encode Algorithms** phase of the BSPF.</span>
<span id="cb1-355"><a href="#cb1-355" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-356"><a href="#cb1-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-357"><a href="#cb1-357" aria-hidden="true" tabindex="-1"></a><span class="fu">## What is MLflow?</span></span>
<span id="cb1-358"><a href="#cb1-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-359"><a href="#cb1-359" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">MLflow</span><span class="co">](https://mlflow.org/)</span>{target="_blank"} is an open-source platform designed to help data scientists and machine learning engineers track and manage their machine learning experiments. It provides tools for experiment logging, reproducibility, and model management. Developed by Databricks, MLflow aims to simplify the machine learning life-cycle by enabling users to keep track of experiments, compare different models, and efficiently share and deploy ML projects.</span>
<span id="cb1-360"><a href="#cb1-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-361"><a href="#cb1-361" aria-hidden="true" tabindex="-1"></a><span class="al">![Email Lead Scoring MLflow Dashboard](png/modelling_png/mlflow/dashboard.png)</span>{width=120% fig-align="center"}</span>
<span id="cb1-362"><a href="#cb1-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-363"><a href="#cb1-363" aria-hidden="true" tabindex="-1"></a>MLflow plays a critical role in the machine learning workflow, addressing several key challenges that data scientists often encounter:</span>
<span id="cb1-364"><a href="#cb1-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-365"><a href="#cb1-365" aria-hidden="true" tabindex="-1"></a>**Experiment Tracking:** MLflow allows data scientists to log their experiments with ease. This includes recording the hyperparameters, metrics, and model artifacts associated with each run. Such comprehensive tracking facilitates comparison between different model iterations and helps in selecting the best performing model for deployment.</span>
<span id="cb1-366"><a href="#cb1-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-367"><a href="#cb1-367" aria-hidden="true" tabindex="-1"></a>**Reproducibility:** In machine learning, it is crucial to ensure that experiments can be reproduced with the same results. MLflow records the exact versions of libraries, data, and code used in each run, making it easier to replicate the experiments and maintain consistency across different environments.</span>
<span id="cb1-368"><a href="#cb1-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-369"><a href="#cb1-369" aria-hidden="true" tabindex="-1"></a>**Collaboration:** In team-based data science projects, collaboration is essential. MLflow enables seamless sharing of experiments, models, and associated artifacts with colleagues, promoting knowledge sharing and fostering a collaborative environment.</span>
<span id="cb1-370"><a href="#cb1-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-371"><a href="#cb1-371" aria-hidden="true" tabindex="-1"></a>**Model Management:** MLflow provides functionalities for model versioning and management. This allows data scientists to keep track of model iterations, deploy the best-performing models, and roll back to previous versions if needed.</span>
<span id="cb1-372"><a href="#cb1-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-373"><a href="#cb1-373" aria-hidden="true" tabindex="-1"></a><span class="fu">## Integrating MLflow with PyCaret</span></span>
<span id="cb1-374"><a href="#cb1-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-375"><a href="#cb1-375" aria-hidden="true" tabindex="-1"></a>PyCaret, can be seamlessly integrated with MLflow to leverage its powerful experiment tracking capabilities. The integration allows data scientists using PyCaret to log their experiments automatically into MLflow, making it easy to keep track of multiple experiments and compare different models efficiently.</span>
<span id="cb1-376"><a href="#cb1-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-377"><a href="#cb1-377" aria-hidden="true" tabindex="-1"></a><span class="al">![Finalized Model Details](png/modelling_png/mlflow/detail.png)</span>{width=100% fig-align="center"}</span>
<span id="cb1-378"><a href="#cb1-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-379"><a href="#cb1-379" aria-hidden="true" tabindex="-1"></a>In this project, MLflow will be a valuable asset as the project progresses and our machine learning models go from development to production. MLflow ensures that the lead scoring process remains organized, reproducible, and collaborative. Its tracking, versioning, and management capabilities contribute to the success and efficiency of the lead scoring system, making MLflow an indispensable component in the data science workflow.</span>
<span id="cb1-380"><a href="#cb1-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-381"><a href="#cb1-381" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-382"><a href="#cb1-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-383"><a href="#cb1-383" aria-hidden="true" tabindex="-1"></a><span class="fu"># Return on Investment (ROI)</span></span>
<span id="cb1-384"><a href="#cb1-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-385"><a href="#cb1-385" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-386"><a href="#cb1-386" aria-hidden="true" tabindex="-1"></a>This section is part of **Step 2: Tie Financial Value of Individual Decisions to Optimize for Profit** under the **Encode Algorithms** phase of the BSPF</span>
<span id="cb1-387"><a href="#cb1-387" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-388"><a href="#cb1-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-389"><a href="#cb1-389" aria-hidden="true" tabindex="-1"></a>In the preceding phase of this project, we successfully developed and trained predictive models to identify leads who are more likely to make a purchase. In this phase, our focus shifts to a critical aspect of the project; Return on Investment (ROI) analysis. This involves tying machine learning models to financial value by determining the potential cost or savings for a machine learning model's prediction. This process is further sub-divided into 2 phases;</span>
<span id="cb1-390"><a href="#cb1-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-391"><a href="#cb1-391" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Identifying a threshold for which to categorize leads as **Hot-Leads** or **Cold-Leads** based on the their score (probability of purchase) from the model. This allows us to determine expected value (sales - cost) from only targeting Hot-Leads.</span>
<span id="cb1-392"><a href="#cb1-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-393"><a href="#cb1-393" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Optimize the threshold for maximum efficiency and ROI based on senior management decisions.</span>
<span id="cb1-394"><a href="#cb1-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-395"><a href="#cb1-395" aria-hidden="true" tabindex="-1"></a>Again the primary goal here is to evaluate the financial implications of classifying leads as Hot-Leads (high probability of purchase) or Cold-Leads (low probability of purchase). Hot-Leads will be targeting with sales emails while cold leads will be targeted with value emails such as free products or CTAs to attend webinars that are highly correlated with making a purchase. It is important to understand that there is an inherent cost versus savings trade-off in targeting different types of leads. By not targeting Cold-Leads, we potentially miss out on some revenue, however there is also a savings as we nurture the Cold-Leads and potentially gain more sales in the future.</span>
<span id="cb1-396"><a href="#cb1-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-397"><a href="#cb1-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-398"><a href="#cb1-398" aria-hidden="true" tabindex="-1"></a><span class="fu">## Initial Threshold &amp; Cost Savings</span></span>
<span id="cb1-399"><a href="#cb1-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-400"><a href="#cb1-400" aria-hidden="true" tabindex="-1"></a>This step involved calculating the <span class="co">[</span><span class="ot">cumulative gain</span><span class="co">](http://mlwiki.org/index.php/Cumulative_Gain_Chart)</span> of our machine learning model to enhance our return on investment (ROI). Here the predictions are sorted based on the model's score (probability) of making a purchase. The Cumulative Gain then measures the proportion of Hot-Leads and Cold-Leads based on a threshold. An arbitrary threshold of **0.95** is used here as the cut off for categorizing Hot-Leads and Cold-Leads.</span>
<span id="cb1-401"><a href="#cb1-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-402"><a href="#cb1-402" aria-hidden="true" tabindex="-1"></a>The table below shows the proportion of hot and cold leads based on this arbitrary 0.95 threshold.</span>
<span id="cb1-403"><a href="#cb1-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-404"><a href="#cb1-404" aria-hidden="true" tabindex="-1"></a>| **Category**   | **Total Leads** | **Made Purchase** |</span>
<span id="cb1-405"><a href="#cb1-405" aria-hidden="true" tabindex="-1"></a>|----------------|-----------------|-------------------|</span>
<span id="cb1-406"><a href="#cb1-406" aria-hidden="true" tabindex="-1"></a>| Cold-Lead      | 5,528           | 49                |</span>
<span id="cb1-407"><a href="#cb1-407" aria-hidden="true" tabindex="-1"></a>| Hot-Lead       | 14,691          | 913               |</span>
<span id="cb1-408"><a href="#cb1-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-409"><a href="#cb1-409" aria-hidden="true" tabindex="-1"></a>: Hot / Cold Lead Categorization (95% Gain Threshold)</span>
<span id="cb1-410"><a href="#cb1-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-411"><a href="#cb1-411" aria-hidden="true" tabindex="-1"></a>This approach refines our marketing strategy. Instead of targeting all leads with sales emails, we now only focus on sending sales emails to Hot-Leads, while simultaneously nurturing Cold-Leads, whom we'll expect to make a purchase within 90 days. The result of this would be some initial loss in sales as not all leads are targeted. Based on the **Cold-Lead** row in the table above, we can see that 5528 (27%) of leads will NOT be targeted for sales emails, resulting in potential lost purchases of 49. However, the initial loss in sales will be offset as we nurture cold leads and get them to make a purchase within 90 days.</span>
<span id="cb1-412"><a href="#cb1-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-413"><a href="#cb1-413" aria-hidden="true" tabindex="-1"></a><span class="fu">### Expected Value (Cost vs Savings)</span></span>
<span id="cb1-414"><a href="#cb1-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-415"><a href="#cb1-415" aria-hidden="true" tabindex="-1"></a>As highlighted above, there is as cost and savings trade-off from only targeting Hot-Leads while only nurturing Cold-Leads. **Expected Value** in this case, is the financial value associated with various cost and saving scenarios. Let's deep dive into this expected value calculations for this project, based on our threshold of **0.9** for determining hot and cold leads and the proportion of hot and cold leaders shown the previous table.</span>
<span id="cb1-416"><a href="#cb1-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-417"><a href="#cb1-417" aria-hidden="true" tabindex="-1"></a>Before proceeding, we'll also need some of the values stated earlier in the <span class="co">[</span><span class="ot">Business Understanding</span><span class="co">](#business-understanding)</span> section -</span>
<span id="cb1-418"><a href="#cb1-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-419"><a href="#cb1-419" aria-hidden="true" tabindex="-1"></a>| Business KPIs            | Value          |</span>
<span id="cb1-420"><a href="#cb1-420" aria-hidden="true" tabindex="-1"></a>|--------------------------|:---------------|</span>
<span id="cb1-421"><a href="#cb1-421" aria-hidden="true" tabindex="-1"></a>| Email List Size          | 100,000        |</span>
<span id="cb1-422"><a href="#cb1-422" aria-hidden="true" tabindex="-1"></a>| Unsubscribes Per Email   | 500            |</span>
<span id="cb1-423"><a href="#cb1-423" aria-hidden="true" tabindex="-1"></a>| Sales Emails Per Month   | 5              |</span>
<span id="cb1-424"><a href="#cb1-424" aria-hidden="true" tabindex="-1"></a>| Unsubscribe Rate         | 0.50%          |</span>
<span id="cb1-425"><a href="#cb1-425" aria-hidden="true" tabindex="-1"></a>| Avg Sales Per Month      | $250,000       |</span>
<span id="cb1-426"><a href="#cb1-426" aria-hidden="true" tabindex="-1"></a>| Customer Conversion Rate | 5.00%          |</span>
<span id="cb1-427"><a href="#cb1-427" aria-hidden="true" tabindex="-1"></a>| Avg Customer CLV         | $2,000         |</span>
<span id="cb1-428"><a href="#cb1-428" aria-hidden="true" tabindex="-1"></a>| Sales Per Email Sent     | $50,000        |</span>
<span id="cb1-429"><a href="#cb1-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-430"><a href="#cb1-430" aria-hidden="true" tabindex="-1"></a>: Current Business KPIs</span>
<span id="cb1-431"><a href="#cb1-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-432"><a href="#cb1-432" aria-hidden="true" tabindex="-1"></a>These business KPIs are then used along with subscriber counts from the <span class="co">[</span><span class="ot">initial threshold</span><span class="co">](#initial-threshold--cost-savings)</span> table to generate some preliminary expected value calulations.</span>
<span id="cb1-433"><a href="#cb1-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-434"><a href="#cb1-434" aria-hidden="true" tabindex="-1"></a>| KPI                                  | Value    | Description                                        |</span>
<span id="cb1-435"><a href="#cb1-435" aria-hidden="true" tabindex="-1"></a>|--------------------------------------|:---------|:---------------------------------------------------|</span>
<span id="cb1-436"><a href="#cb1-436" aria-hidden="true" tabindex="-1"></a>| Missed Purchase Ratio                | 5.0%     | Proportion of leads that did not make a purchase   |</span>
<span id="cb1-437"><a href="#cb1-437" aria-hidden="true" tabindex="-1"></a>| Made Purchase Ratio                  | 94.91%   | Proportion of leads that made a purchase           |</span>
<span id="cb1-438"><a href="#cb1-438" aria-hidden="true" tabindex="-1"></a>| Savings - Cold Leads Not Targeted    | $65,616  | Monthly savings from cold leads not targeted       |</span>
<span id="cb1-439"><a href="#cb1-439" aria-hidden="true" tabindex="-1"></a>| Cost - Cold Leads Missed Sales       | $12,734  | Missed sales from cold leads not targeted          |</span>
<span id="cb1-440"><a href="#cb1-440" aria-hidden="true" tabindex="-1"></a>| Cost - Hot Leads that Unsubscribe    | $184,384 | Missed sales from hot leads that unsubscribe       |</span>
<span id="cb1-441"><a href="#cb1-441" aria-hidden="true" tabindex="-1"></a>| Savings - New Monthly Sales          | $237,266 | Monthly sales in the first month of new strategy   |</span>
<span id="cb1-442"><a href="#cb1-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-443"><a href="#cb1-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-444"><a href="#cb1-444" aria-hidden="true" tabindex="-1"></a>: Preliminary EV Calculations (Based on 95% Threshold and Sample Factor of 5.0)</span>
<span id="cb1-445"><a href="#cb1-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-446"><a href="#cb1-446" aria-hidden="true" tabindex="-1"></a>::: {.callout-important title="Expected Value Calculations"}</span>
<span id="cb1-447"><a href="#cb1-447" aria-hidden="true" tabindex="-1"></a>To understand how these values are calculated, please refer to <span class="co">[</span><span class="ot">this</span><span class="co">](https://github.com/LucasO21/DS4B_Python_ML_And_APIs/tree/main/analysis/ev_calculation)</span>{target="_blank"} excel sheet.</span>
<span id="cb1-448"><a href="#cb1-448" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-449"><a href="#cb1-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-450"><a href="#cb1-450" aria-hidden="true" tabindex="-1"></a>Finally these preliminary calculations are then used to calculate expected value. The table below is a breakdown of cost vs savings for this new strategy vs our old strategy of targeting all leads with sales emails.</span>
<span id="cb1-451"><a href="#cb1-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-452"><a href="#cb1-452" aria-hidden="true" tabindex="-1"></a>| EV (with New Lead Scoring Strategy)            | Value      | Description                                           |</span>
<span id="cb1-453"><a href="#cb1-453" aria-hidden="true" tabindex="-1"></a>|-----------------------------------------------|:-----------|:----------------------------------------------------- |</span>
<span id="cb1-454"><a href="#cb1-454" aria-hidden="true" tabindex="-1"></a>| Revenue in First Month                        | $237,266   | Sales in first month with new strategy     |</span>
<span id="cb1-455"><a href="#cb1-455" aria-hidden="true" tabindex="-1"></a>| New Revenue (Post Nurturing Cold Leads)       | $290,148   | Expected total sales after nurturing cold leads       |</span>
<span id="cb1-456"><a href="#cb1-456" aria-hidden="true" tabindex="-1"></a>| Expected Monthly Savings                      | $52,882    | Expected monthly savings with new strategy |</span>
<span id="cb1-457"><a href="#cb1-457" aria-hidden="true" tabindex="-1"></a>| Expected Saved Customers                      | 33         | Expected saved customers with new strategy   |</span>
<span id="cb1-458"><a href="#cb1-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-459"><a href="#cb1-459" aria-hidden="true" tabindex="-1"></a>: Expected Value of Implementing New Strategy (Based on 95% Threhold and Sample Factor of 5.0)</span>
<span id="cb1-460"><a href="#cb1-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-461"><a href="#cb1-461" aria-hidden="true" tabindex="-1"></a>**Key Takeaways:** The proposed new strategy, focusing only on Hot-Leads, is expected to generate sales of approximately $237,266 in the first month. This approach differs from the previous strategy where we targeted all leads with sales emails. Despite this initial month's sales being 5% lower than our usual monthly sales of $250,000, we will save $52,882 each month by not sending sales emails to Cold-Leads. More importantly, by nurturing Cold-Leads effectively and converting them into buyers within 90 days, we anticipate a significant increase in sales. We project our net sales to reach $290,148, marking a 16% rise compared to our current monthly sales.</span>
<span id="cb1-462"><a href="#cb1-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-463"><a href="#cb1-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-464"><a href="#cb1-464" aria-hidden="true" tabindex="-1"></a><span class="fu">## Threshold Optimization &amp; Profit Maximization</span></span>
<span id="cb1-465"><a href="#cb1-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-466"><a href="#cb1-466" aria-hidden="true" tabindex="-1"></a>Our initial ROI analysis used a 95% threshold to decide whether leads are hot (likely to buy) or cold (less likely to buy). This section explores how changing this threshold affects our expected profits and cost savings.</span>
<span id="cb1-467"><a href="#cb1-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-468"><a href="#cb1-468" aria-hidden="true" tabindex="-1"></a>The main aim is to find the sweet spot that maximizes profit. However, we must also consider management's concerns. For example, using the 95% threshold, we saw a 5% drop in sales in the first month. Senior management may be hesitant about any strategy that reduces monthly sales, even if it could lead to higher sales later on.</span>
<span id="cb1-469"><a href="#cb1-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-470"><a href="#cb1-470" aria-hidden="true" tabindex="-1"></a>The plot below shows our optimization results. On the x-axis, various threshold levels are plotted, ranging from 0 to 1. The y-axis corresponds to the expected value associated with each of these thresholds. A notable feature on the chart is a red dashed line, marking the **88%** threshold. This specific threshold that categorizes leads into Hot or Cold. This is the point where the maximum expected value is realized - in this instance, **$322,893**.</span>
<span id="cb1-471"><a href="#cb1-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-472"><a href="#cb1-472" aria-hidden="true" tabindex="-1"></a>This maximum expected value is achieved under the condition that a minimum of **87%** of the usual monthly sales is preserved, even when implementing the new email lead scoring strategy. Essentially, the **87%** figure acts as a benchmark, ensuring that the new strategy does not significantly erode monthly sales. We refer to this benchmark as the **Monthly Sales Reduction Safeguard**. It serves as a critical parameter, ensuring that while maximizing the expected value from lead scoring, the strategy also safeguards a significant portion of the current monthly sales, maintaining at least **$219,595** in this scenario.</span>
<span id="cb1-473"><a href="#cb1-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-474"><a href="#cb1-474" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/cost/optimization_thresh_88.png)</span>{width=100% fig-align="center"}</span>
<span id="cb1-475"><a href="#cb1-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-476"><a href="#cb1-476" aria-hidden="true" tabindex="-1"></a>However, management might consider this 87% safeguard to be too low. They may prefer a higher safeguard, for example, 90%. This means the new strategy should retain at least 90% of our monthly sales. The plot also shows how the expected value changes when we apply this 90% safeguard.</span>
<span id="cb1-477"><a href="#cb1-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-478"><a href="#cb1-478" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/cost/optimization_thresh_90.png)</span>{width=100% fig-align="center"}</span>
<span id="cb1-479"><a href="#cb1-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-480"><a href="#cb1-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-481"><a href="#cb1-481" aria-hidden="true" tabindex="-1"></a>Notice that with a **90%** safeguard, the expected value drops to **$317,695**. However we see an increase in the current monthly sales retained, **$224,532** in this case.</span>
<span id="cb1-482"><a href="#cb1-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-483"><a href="#cb1-483" aria-hidden="true" tabindex="-1"></a>In conclusion the core of our decision-making process lies in striking a balance between two crucial objectives; achieving higher expected value in the long term vs maintaining current monthly sales levels in the short term. This trade-off presents a strategic challenge that all stakeholders must collectively navigate. The choice between prioritizing immediate sales stability and pursuing potentially greater profits down the line is pivotal. The optimization exercise shows the implications of various thresholds, but it ultimately falls to the collective agreement of all involved parties to determine the most suitable path forward. This decision will shape not only our immediate financial landscape but also our strategic direction in the foreseeable future.</span>
<span id="cb1-484"><a href="#cb1-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-485"><a href="#cb1-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-486"><a href="#cb1-486" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-487"><a href="#cb1-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-488"><a href="#cb1-488" aria-hidden="true" tabindex="-1"></a><span class="fu"># Backend Deployment (FastAPI)</span></span>
<span id="cb1-489"><a href="#cb1-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-490"><a href="#cb1-490" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-491"><a href="#cb1-491" aria-hidden="true" tabindex="-1"></a>This section is part of the last 2 phases of the BSPF **(Measure Results and Report Financial Impact)**. Deploying ML models and enabling users to engage with these strategies is key to these last 3 phases of the BSPF.</span>
<span id="cb1-492"><a href="#cb1-492" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-493"><a href="#cb1-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-494"><a href="#cb1-494" aria-hidden="true" tabindex="-1"></a>We are now progressing into the deployment phase of our email lead scoring project. It is crucial to understand how we integrate the developed models into our business processes. This integration is achieved through the creation of <span class="co">[</span><span class="ot">Application Programming Interfaces</span><span class="co">](https://en.wikipedia.org/wiki/API)</span>{target="_blank"} (APIs). The APIs serve as communication gateways between our data models and the user-facing application, in this case, a Streamlit app. This app will enable senior management and other marketing stakeholders to interact with and benefit from our email lead scoring strategies.</span>
<span id="cb1-495"><a href="#cb1-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-496"><a href="#cb1-496" aria-hidden="true" tabindex="-1"></a><span class="fu">## API</span></span>
<span id="cb1-497"><a href="#cb1-497" aria-hidden="true" tabindex="-1"></a>Our API, developed using <span class="co">[</span><span class="ot">FastAPI</span><span class="co">](https://fastapi.tiangolo.com/)</span>{target="_blank"}, features several endpoints,</span>
<span id="cb1-498"><a href="#cb1-498" aria-hidden="true" tabindex="-1"></a>each serving a specific purpose;</span>
<span id="cb1-499"><a href="#cb1-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-500"><a href="#cb1-500" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Main Endpoint <span class="in">`("/")`</span></span>
<span id="cb1-501"><a href="#cb1-501" aria-hidden="true" tabindex="-1"></a>This is the landing page of our API. It provides users with a welcoming interface and guides them to the API documentation. This endpoint is crucial for user orientation and ease of use.</span>
<span id="cb1-502"><a href="#cb1-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-503"><a href="#cb1-503" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Get Email Subscribers <span class="in">`("/get_email_subscribers")`</span></span>
<span id="cb1-504"><a href="#cb1-504" aria-hidden="true" tabindex="-1"></a>This <span class="in">`GET`</span> endpoint exposes our email subscriber data. When accessed, it returns the data with scored leads in JSON format. It's vital for stakeholders to view and understand the current leads database.</span>
<span id="cb1-505"><a href="#cb1-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-506"><a href="#cb1-506" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Data Reception <span class="in">`("/data")`</span></span>
<span id="cb1-507"><a href="#cb1-507" aria-hidden="true" tabindex="-1"></a>A <span class="in">`POST`</span> endpoint designed to receive data. Users can submit data in JSON format, which is then processed and stored. This endpoint is essential for updating our leads database with new information.</span>
<span id="cb1-508"><a href="#cb1-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-509"><a href="#cb1-509" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Lead Scoring Prediction <span class="in">`("/predict")`</span></span>
<span id="cb1-510"><a href="#cb1-510" aria-hidden="true" tabindex="-1"></a>This <span class="in">`POST`</span> endpoint is the heart of our API. It accepts lead data and returns scored leads, using our proprietary lead scoring models. It enables the application of our predictive model to new or existing data for real-time lead scoring.</span>
<span id="cb1-511"><a href="#cb1-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-512"><a href="#cb1-512" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Lead Scoring Strategy Calculation <span class="in">`("/calculate_lead_strategy")`</span></span>
<span id="cb1-513"><a href="#cb1-513" aria-hidden="true" tabindex="-1"></a>Another <span class="in">`POST`</span> endpoint, it calculates and optimizes lead scoring strategies based on various parameters (e.g., sales reduction safeguard, email list size). This is crucial for strategic decision-making and marketing optimization.</span>
<span id="cb1-514"><a href="#cb1-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-515"><a href="#cb1-515" aria-hidden="true" tabindex="-1"></a>APIs play a pivotal role in the data science lifecycle, especially in the deployment phase. They enable the seamless integration of data science models into business processes, making predictive insights accessible and actionable for decision-makers. APIs facilitate real-time data processing and interaction, which is essential for dynamic and responsive business strategies.</span>
<span id="cb1-516"><a href="#cb1-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-517"><a href="#cb1-517" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-518"><a href="#cb1-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-519"><a href="#cb1-519" aria-hidden="true" tabindex="-1"></a><span class="fu"># Frontend Deployment (Streamlit)</span></span>
<span id="cb1-520"><a href="#cb1-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-521"><a href="#cb1-521" aria-hidden="true" tabindex="-1"></a>::: {.callout-note title="BSPF Phase"}</span>
<span id="cb1-522"><a href="#cb1-522" aria-hidden="true" tabindex="-1"></a>This section is part of the last 2 phases of the BSPF **(Measure Results and Report Financial Impact)**. Deploying ML models and enabling users to engage with these strategies is key to these last 2 phases of the BSPF.</span>
<span id="cb1-523"><a href="#cb1-523" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-524"><a href="#cb1-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-525"><a href="#cb1-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-526"><a href="#cb1-526" aria-hidden="true" tabindex="-1"></a>In this final phase of the email lead scoring project, we transition from the development of <span class="co">[</span><span class="ot">API endpoints</span><span class="co">](#api-endpoints)</span> for our lead scoring strategy to their practical application. Recognizing the importance of deployment in the lifecycle of any data science project, we integrated these APIs into a user-friendly <span class="co">[</span><span class="ot">Streamlit</span><span class="co">](https://streamlit.io/)</span>{target="_blank"} application. This step is instrumental in transforming our analytical insights into actionable tools, directly accessible to senior management and other marketing stakeholders.</span>
<span id="cb1-527"><a href="#cb1-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-528"><a href="#cb1-528" aria-hidden="true" tabindex="-1"></a>::: {.callout-important title="Streamlit App"}</span>
<span id="cb1-529"><a href="#cb1-529" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--You can access the Streamlit app [here](). --&gt;</span></span>
<span id="cb1-530"><a href="#cb1-530" aria-hidden="true" tabindex="-1"></a>Please be aware that the Streamlit application is currently in the final stages of development and has not yet been deployed to a cloud platform. As soon as the deployment is complete, a direct link will be added to this write-up.</span>
<span id="cb1-531"><a href="#cb1-531" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-532"><a href="#cb1-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-533"><a href="#cb1-533" aria-hidden="true" tabindex="-1"></a>When first accessed, the link brings the user to an authentication screen where they will need to input their secret keys.</span>
<span id="cb1-534"><a href="#cb1-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-535"><a href="#cb1-535" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/streamlit/auth.png)</span>{width=60% fig-align="center"}</span>
<span id="cb1-536"><a href="#cb1-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-537"><a href="#cb1-537" aria-hidden="true" tabindex="-1"></a>Once logged in successfully, the user will be prompted to upload a csv file with the leads scored data. In an enterprise setting, we will be connecting the app to the company's database.</span>
<span id="cb1-538"><a href="#cb1-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-539"><a href="#cb1-539" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/streamlit/browse_csv.png)</span>{width=60% fig-align="center"}</span>
<span id="cb1-540"><a href="#cb1-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-541"><a href="#cb1-541" aria-hidden="true" tabindex="-1"></a>Next, the user can adjust the monthly sales and <span class="co">[</span><span class="ot">monthly sales safeguard</span><span class="co">](#threshold-optimization--profit-maximization)</span>, based on the strategy they would like to implement, then hit the <span class="in">`Run Analysis`</span> button.</span>
<span id="cb1-542"><a href="#cb1-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-543"><a href="#cb1-543" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/streamlit/safeguard.png)</span>{width=60% fig-align="center"}</span>
<span id="cb1-544"><a href="#cb1-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-545"><a href="#cb1-545" aria-hidden="true" tabindex="-1"></a>Once the analysis is complete, the user will be able to see the expected value table and plot based on their monthly sales and monthly sales safeguard inputs.</span>
<span id="cb1-546"><a href="#cb1-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-547"><a href="#cb1-547" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/streamlit/plot.png)</span>{width=60% fig-align="center"}</span>
<span id="cb1-548"><a href="#cb1-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-549"><a href="#cb1-549" aria-hidden="true" tabindex="-1"></a>Additionally the user can also see and download the lead scoring strategy data with leads information and their Hot-Lead/Cold-Lead classification.</span>
<span id="cb1-550"><a href="#cb1-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-551"><a href="#cb1-551" aria-hidden="true" tabindex="-1"></a><span class="al">![](png/streamlit/strategy.png)</span>{width=60% fig-align="center"}</span>
<span id="cb1-552"><a href="#cb1-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-553"><a href="#cb1-553" aria-hidden="true" tabindex="-1"></a>In conclusion, the successful deployment of our Streamlit application is a crucial step in our email lead scoring project. This user-friendly platform is key in making our advanced data models accessible and practical for everyday use within the company. By providing senior management and marketing teams with this tool, we enable them to easily measure results and understand the financial impact of our lead scoring strategy. This application is more than just a technical achievement; it's a vital component in ensuring that our project's insights are effectively utilized, leading to informed decisions and a clearer understanding of our strategy's financial benefits.</span>
<span id="cb1-554"><a href="#cb1-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-555"><a href="#cb1-555" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-556"><a href="#cb1-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-557"><a href="#cb1-557" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusion</span></span>
<span id="cb1-558"><a href="#cb1-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-559"><a href="#cb1-559" aria-hidden="true" tabindex="-1"></a>This project has successfully demonstrated the integration of advanced data science techniques into practical business solutions for email lead scoring. The journey from conceptualization to the development of a functional model highlights key achievements and insights.</span>
<span id="cb1-560"><a href="#cb1-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-561"><a href="#cb1-561" aria-hidden="true" tabindex="-1"></a>**Strategic Application of Data Science:** The core of this project was the strategic application of machine learning to enhance email marketing efforts. By employing predictive modeling and feature engineering, we have developed a robust system that can accurately identify and score potential leads. This approach allows for a more targeted and efficient use of marketing resources, potentially leading to increased conversion rates and customer engagement.</span>
<span id="cb1-562"><a href="#cb1-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-563"><a href="#cb1-563" aria-hidden="true" tabindex="-1"></a>**Technical Implementation:** A significant aspect of this project was the technical implementation of our models in a user-friendly interface, achieved through the development of a Streamlit application. This interface serves as a bridge, making complex analytical models accessible and usable for decision-makers within the organization. It represents a crucial step in translating data-driven insights into actionable business strategies.</span>
<span id="cb1-564"><a href="#cb1-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-565"><a href="#cb1-565" aria-hidden="true" tabindex="-1"></a>**Financial Implications and Future Directions:** The ROI analysis conducted as part of this project illustrates the potential financial benefits of implementing a lead scoring system. It offers a glimpse into how optimizing lead targeting can impact the bottom line. However, the full potential of these models will be realized once the Streamlit application is deployed and integrated into the company's daily operations.</span>
<span id="cb1-566"><a href="#cb1-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-567"><a href="#cb1-567" aria-hidden="true" tabindex="-1"></a>In conclusion, this project not only showcases the practical application of machine learning in a business context but also sets the stage for further innovations in data-driven marketing strategies. The insights and methodologies developed here can serve as a blueprint for similar initiatives in the future, driving forward the agenda of data-centric decision-making in the business world.</span>
<span id="cb1-568"><a href="#cb1-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-569"><a href="#cb1-569" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-570"><a href="#cb1-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-571"><a href="#cb1-571" aria-hidden="true" tabindex="-1"></a><span class="fu"># Next Steps</span></span>
<span id="cb1-572"><a href="#cb1-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-573"><a href="#cb1-573" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Deploy Streamlit app to a cloud platform.</span>
<span id="cb1-574"><a href="#cb1-574" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Continue learning how to integrate FastAPI with web applications.</span>
<span id="cb1-575"><a href="#cb1-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-576"><a href="#cb1-576" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-577"><a href="#cb1-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-578"><a href="#cb1-578" aria-hidden="true" tabindex="-1"></a>Reproducible code is available on <span class="co">[</span><span class="ot">Github</span><span class="co">](https://github.com/LucasO21/DS4B_Python_ML_And_APIs)</span>{target="_blank"}.</span>
<span id="cb1-579"><a href="#cb1-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-580"><a href="#cb1-580" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center"><span class="container"><strong>Made with <a href="https://quarto.org/" target="_blank">Posit Quarto</a></strong></span></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>